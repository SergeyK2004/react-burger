(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{113:function(e,t,n){e.exports={App:"App_App__aOmNj"}},116:function(e,t,n){e.exports={burgerItem:"ConstructorIngredient_burgerItem__kSq-9"}},118:function(e,t,n){e.exports={overlay:"ModalOverlay_overlay__M4729"}},129:function(e,t,n){},15:function(e,t,n){e.exports={header:"AppHeader_header__X9aJA",navigate:"AppHeader_navigate__2nXZk",menuItem:"AppHeader_menuItem__2FHPz",menuItemActive:"AppHeader_menuItemActive__2rIr1 AppHeader_menuItem__2FHPz",burgers:"AppHeader_burgers__3SQyx",logo:"AppHeader_logo__3VxwD",menuItemLs:"AppHeader_menuItemLs__1vMr9"}},16:function(e,t,n){e.exports={form:"Profile_form__337o4",nav:"Profile_nav__3aSRW",main:"Profile_main__YfNHw",footerLine:"Profile_footerLine__z_eT6",link:"Profile_link__sv_tt",exitLink:"Profile_exitLink__3wSeb",activeLink:"Profile_activeLink__viT_t",text:"Profile_text__24QG7",input:"Profile_input__2BMzb",buttons:"Profile_buttons__3S8_2"}},19:function(e,t,n){e.exports={bigCard:"OrderComposition_bigCard__1IH2f",bigCardName:"OrderComposition_bigCardName__1KOWv",number:"OrderComposition_number__v5KPG",burgerName:"OrderComposition_burgerName__ZA6Ja",burgerStatus:"OrderComposition_burgerStatus__2ykDZ",list:"OrderComposition_list__uDT4l",row:"OrderComposition_row__4IK3k",image:"OrderComposition_image___nfji",ingredientName:"OrderComposition_ingredientName__x4Zcq",footer:"OrderComposition_footer__Sf4P5",price:"OrderComposition_price__1swd9"}},210:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Gt}));var a=n(1),r=n.n(a),c=n(43),s=n.n(c),i=(n(129),n(8)),o=n(113),d=n.n(o),l=n(15),u=n.n(l),m=n(6),j=n(11),b=n(7),p=n(0);var _=function(){var e=r.a.useState("designer"),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(j.j)().path;return Object(a.useEffect)((function(){switch(s){case"/feed":c("feed");break;case"/profile":c("profile");break;case"/":c("designer");break;default:c("designer")}}),[s]),Object(p.jsx)("div",{className:u.a.header,children:Object(p.jsxs)("nav",{className:u.a.navigate,children:[Object(p.jsxs)("div",{className:u.a.burgers,children:[Object(p.jsxs)(b.b,{to:"/",className:("designer"===n?u.a.menuItemActive:u.a.menuItem)+" text text_type_main-default pl-5 pr-5 pb-4 pt-4 mr-2",children:[Object(p.jsx)(m.BurgerIcon,{type:"designer"===n?"primary":"secondary"}),Object(p.jsx)("p",{className:"ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(p.jsxs)(b.b,{to:"/feed",className:("feed"===n?u.a.menuItemActive:u.a.menuItem)+" text text_type_main-default pl-5 pr-5 pb-4 pt-4 mr-2",children:[Object(p.jsx)(m.ListIcon,{type:"feed"===n?"primary":"secondary"}),Object(p.jsx)("p",{className:"ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(p.jsx)("div",{className:u.a.logo,children:Object(p.jsx)(b.b,{to:"/",children:Object(p.jsx)(m.Logo,{})})}),Object(p.jsx)("div",{className:("profile"===n?u.a.menuItemActive:u.a.menuItem)+" text text_type_main-default pl-5 pr-5 pb-4 pt-4 mr-2 "+u.a.menuItemLs,children:Object(p.jsxs)(b.b,{to:"/profile",className:("profile"===n?u.a.menuItemActive:u.a.menuItem)+" text text_type_main-default ",children:[Object(p.jsx)(m.ProfileIcon,{type:"profile"===n?"primary":"secondary"}),Object(p.jsx)("p",{className:"ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},x=n(69),O=n.n(x),h=n(45),f=n.n(h),g=n.p+"static/media/done.85c3a14d.svg",v=n(56),N=v.c,y=function(){return Object(v.b)()},C=n(31),S=n.n(C);var k=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:S.a.spinner,children:[Object(p.jsx)("div",{className:S.a.dot}),Object(p.jsx)("div",{className:S.a.dot}),Object(p.jsx)("div",{className:S.a.dot}),Object(p.jsx)("div",{className:S.a.dot}),Object(p.jsx)("div",{className:S.a.dot}),Object(p.jsx)("div",{className:S.a.dot}),Object(p.jsx)("div",{className:S.a.dot})]}),Object(p.jsx)("svg",{children:Object(p.jsx)("defs",{children:Object(p.jsxs)("filter",{id:"goo",children:[Object(p.jsx)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),Object(p.jsx)("feColorMatrix",{in:"blur",mode:"matrix",values:" 1 0 0 0 0  0 1 0 0 0 0 0 1 0 0 0 0 0 25 -8",result:"goo"}),Object(p.jsx)("feBlend",{in:"SourceGraphic",in2:"goo"})]})})})]})};var I=function(){var e=N((function(e){return e.burgerReducer.order}));return Object(p.jsxs)("div",{className:f.a.bigCard,children:[e?Object(p.jsx)("p",{className:f.a.order+" text text_type_digits-large",children:e}):Object(p.jsx)("p",{className:f.a.order+" text text_type_digits-large",children:"- - - - -"}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),e?Object(p.jsx)("img",{src:g,alt:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",className:f.a.done+" mt-15"}):Object(p.jsx)(k,{}),Object(p.jsx)("p",{className:"text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("p",{className:f.a.stationText+" text text_type_main-default mt-2 mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},E=n(30),w=n.n(E),T=n(44),L="https://norma.nomoreparties.space/api",R="LOAD_INGREDIENTS",P="LOAD_DETAILS",A="DELETE_DETAILS",D="ORDER_NUMBER",M="ADD_INGREDIENT",B="DELETE_INGREDIENT",H="CHANGE_INGREDIENT",z="ORDER_CLEAR",G="LOGIN_USER",F="REGISTER_USER",U="LOGOUT_USER",J="CHEK_TOKEN",q="WS_CONNECTION_START",W="WS_CONNECTION_CLOSE",X="WS_CONNECTION_SUCCESS",Z="WS_CONNECTION_ERROR",K="WS_CONNECTION_CLOSED",V="WS_GET_MESSAGE",Y=n(3);function Q(){return function(e){fetch("".concat(L,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then($).then((function(t){if(!t.success)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445");te("accessToken","",{"max-age":-1}),localStorage.removeItem("refreshToken"),e({type:U})})).catch((function(e){console.log(e)}))}}var $=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},ee=function(){var e=Object(T.a)(w.a.mark((function e(t,n){var a,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,$(a);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=26;break}return e.next=14,fetch("".concat(L,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then($);case 14:return r=e.sent,localStorage.setItem("refreshToken",r.refreshToken),te("accessToken",r.accessToken),n.headers.authorization=r.accessToken,e.next=20,fetch(t,n);case 20:return c=e.sent,e.next=23,$(c);case 23:return e.abrupt("return",e.sent);case 26:return e.abrupt("return",Promise.reject(e.t0));case 27:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=n||{};var a=(n=Object(Y.a)({path:"/",expires:35900},n)).expires;if("number"==typeof a&&a){var r=new Date;r.setTime(r.getTime()+1e3*a),a=n.expires=r}a&&a.toUTCString&&(n.expires=a.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c}function ne(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}var ae=n(220),re=n(116),ce=n.n(re),se=n(219),ie=function(e){var t=e.item,n=e.index,r=e.moveElement,c=Object(a.useRef)(null),s=y(),o=Object(se.a)({type:"constructorElement",item:function(){return{item:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),d=Object(i.a)(o,2),l=d[0].isDragging,u=d[1],j=Object(ae.a)({accept:"constructorElement",hover:function(e,t){var a;if(e.index&&e.index!==n){var s=null===(a=c.current)||void 0===a?void 0:a.getBoundingClientRect();if(s){var i=(s.bottom-s.top)/2,o=t.getClientOffset();if(o){var d=o.y-s.top;e.index<n&&d<i||e.index>n&&d>i||(r(e.index,n),e.index=n)}}}}});var b=l?0:1;return u((0,Object(i.a)(j,2)[1])(c)),Object(p.jsxs)("div",{ref:c,className:ce.a.burgerItem,style:{opacity:b},children:[Object(p.jsx)(m.DragIcon,{type:"primary"}),Object(p.jsx)(m.ConstructorElement,{handleClose:function(){s({type:B,item:t,qnt:1})},text:t.name,price:t.price,thumbnail:t.image_mobile})]},t.constId)},oe={total:0},de=function(e){var t=e.onModalOpen,n=y(),c=N((function(e){return e.burgerReducer.constructor})),s=Date.now(),o=N((function(e){return e.authReducer.isAuthorized})),d=Object(j.g)(),l=Object(ae.a)({accept:"ingredient",drop:function(e){b(e)}}),u=Object(i.a)(l,2)[1],b=function(e){var t=1;if("bun"===e.type){t=2;var a=c.find((function(e){return"bun"===e.type}));a&&n({type:B,item:a,qnt:t})}n({type:M,item:e,id:s,qnt:t})},_=c.find((function(e){return"bun"===e.type})),x=Object(a.useReducer)((function(){return{total:c.reduce((function(e,t){return e+("bun"===t.type?2*t.price:t.price)}),0)}}),oe),h=Object(i.a)(x,2),f=h[0],g=h[1];function v(e,t){n({type:H,dragIndex:e,hoverIndex:t})}r.a.useEffect((function(){g()}),[c]);var C=_?{}:{opacity:.5,cursor:"default"};return Object(p.jsxs)("div",{ref:u,className:"mt-25 ml-4",children:[_&&Object(p.jsx)(m.ConstructorElement,{type:"top",isLocked:!0,text:_.name+" (\u0432\u0435\u0440\u0445)",price:_.price,thumbnail:_.image_mobile}),Object(p.jsx)("div",{className:O.a.list+" mt-4 mb-4 pr-4",children:c.map((function(e,t){return"bun"!==e.type&&Object(p.jsx)(ie,{item:e,index:t,moveElement:v},e.constId)}))}),_&&Object(p.jsx)(m.ConstructorElement,{type:"bottom",isLocked:!0,text:_.name+" (\u043d\u0438\u0437)",price:_.price,thumbnail:_.image_mobile}),Object(p.jsxs)("div",{className:O.a.footer+"  mt-10",children:[Object(p.jsxs)("div",{className:"mr-10",children:[Object(p.jsx)("p",{className:O.a.total+" text text_type_digits-medium",children:f.total}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("div",{style:C,children:Object(p.jsx)(m.Button,{type:"primary",size:"medium",onClick:function(){if(_)if(o){n(function(e){return function(){var t=Object(T.a)(w.a.mark((function t(n){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.map((function(e){return e._id})),t.next=3,fetch(L+"/orders",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",authorization:ne("accessToken")},body:JSON.stringify({ingredients:a})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){if(!e.success)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445");n({type:D,number:e.order.number}),n({type:z})})).catch((function(e){console.log(e.message)}));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c));t(Object(p.jsx)(I,{}),"")}else d.replace({pathname:"/login"})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]})},le=n(26),ue=n.n(le),me=n(70),je=n.n(me),be=function(e){var t=e.item,n=(e.onModalOpen,Object(j.g)()),a=Object(j.h)();var r=Object(se.a)({type:"ingredient",item:t}),c=Object(i.a)(r,2)[1];return Object(p.jsxs)("div",{ref:c,className:je.a.card,onClick:function(){n.push({pathname:"/ingredients/".concat(t._id),state:{background:a}})},children:[Object(p.jsx)("img",{src:t.image,alt:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442"}),Object(p.jsxs)("div",{className:je.a.price+" mt-1",children:[Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.price}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("p",{className:"text text_type_main-default mt-1",children:t.name}),Object(p.jsx)("div",{className:je.a.counter,children:t.count>0&&Object(p.jsx)(m.Counter,{count:t.count,size:"default"})})]})},pe=function(e){var t=e.onModalOpen,n=N((function(e){return e.burgerReducer.ingredients})),a=r.a.useState("bun"),c=Object(i.a)(a,2),s=c[0],o=c[1],d=n.filter((function(e){return"bun"===e.type})),l=n.filter((function(e){return"main"===e.type})),u=n.filter((function(e){return"sauce"===e.type})),j=document.querySelector("#ingredients"),b=document.querySelector("#bun"),_=document.querySelector("#sauce"),x=document.querySelector("#main");return Object(p.jsxs)("section",{className:ue.a.section,children:[Object(p.jsxs)("div",{className:ue.a.tab,children:[Object(p.jsx)(m.Tab,{value:"bun",active:"bun"===s,onClick:o,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(p.jsx)(m.Tab,{value:"sauce",active:"sauce"===s,onClick:o,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(p.jsx)(m.Tab,{value:"main",active:"main"===s,onClick:o,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(p.jsxs)("div",{id:"ingredients",onScroll:function(){if(j&&b&&_&&x){var e=Math.abs(j.getBoundingClientRect().top-b.getBoundingClientRect().top),t=Math.abs(j.getBoundingClientRect().top-_.getBoundingClientRect().top),n=Math.abs(j.getBoundingClientRect().top-x.getBoundingClientRect().top),a=Math.min(e,t,n);o(e===a?"bun":t===a?"sauce":"main")}else o("bun")},className:ue.a.ingredients,children:[Object(p.jsx)("p",{id:"bun",className:ue.a.chapterLabel+" mt-10 text text_type_main-medium",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(p.jsx)("div",{className:ue.a.chapter+" mt-6 ml-4",children:d.map((function(e){return Object(p.jsx)(be,{item:e,onModalOpen:t},e._id)}))}),Object(p.jsx)("p",{id:"sauce",className:ue.a.chapterLabel+" mt-10 text text_type_main-medium",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(p.jsx)("div",{className:ue.a.chapter+" mt-6 ml-4",children:u.map((function(e){return Object(p.jsx)(be,{item:e,onModalOpen:t},e._id)}))}),Object(p.jsx)("p",{id:"main",className:ue.a.chapterLabel+" mt-10 text text_type_main-medium",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(p.jsx)("div",{className:"".concat(ue.a.chapter," mt-6 ml-4"),children:l.map((function(e){return Object(p.jsx)(be,{item:e,onModalOpen:t},e._id)}))})]})]})},_e=n(94),xe=n.n(_e),Oe=n(215),he=n(121),fe=function(e){var t=e.onModalOpen;return Object(p.jsx)("div",{className:xe.a.main,children:Object(p.jsxs)(Oe.a,{backend:he.a,children:[Object(p.jsxs)("div",{className:"mr-10",children:[Object(p.jsx)("h1",{className:"".concat(xe.a.label," text text_type_main-large mt-10 mb-5"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)(pe,{onModalOpen:t})]}),Object(p.jsx)(de,{onModalOpen:t})]})})},ge=n(46),ve=n.n(ge),Ne=n(118),ye=n.n(Ne),Ce=function(e){var t=e.onClick;return Object(p.jsx)("div",{className:ye.a.overlay,onClick:t})},Se=document.getElementById("react-modals"),ke=function(e){var t=e.children,n=e.onClose,c=e.header,i=void 0===c?"":c;var o=Object(a.useCallback)((function(e){"Escape"===e.key&&(e.preventDefault(),n())}),[n]);return r.a.useEffect((function(){return document.addEventListener("keydown",o),function(){document.removeEventListener("keydown",o)}}),[o]),Se?s.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ce,{onClick:function(){n()}}),Object(p.jsxs)("div",{className:ve.a.modal,children:[Object(p.jsxs)("div",{className:ve.a.header+" mt-10 mr-10 ml-10",children:[Object(p.jsx)("h1",{className:ve.a.label+" text text_type_main-large",children:i}),Object(p.jsx)("button",{className:ve.a.buttonClose,onClick:n})]}),Object(p.jsx)("div",{className:ve.a.children,children:t})]})]}),Se):null};var Ie=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"text text_type_digits-large mt-20",children:"404"}),Object(p.jsx)("p",{className:"text text_type_main-large mt-10",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}),Object(p.jsx)("p",{className:"text text_type_main-default mt-25",children:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0432\u044b \u043f\u043e\u043f\u0430\u043b\u0438 \u0441\u044e\u0434\u0430 \u043f\u043e \u043e\u0448\u0438\u0431\u043a\u0435, \u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0438\u043b \u043f\u0440\u043e\u043b\u0435\u0442\u0430\u044e\u0449\u0438\u0439 \u043c\u0438\u043c\u043e \u043c\u0435\u0442\u0435\u043e\u0440\u0438\u0442."})]})},Ee=n(21),we=n(47),Te=n.n(we),Le=n(29),Re=n.n(Le);var Pe=function(){var e,t=Object(a.useState)({email:"",password:""}),n=Object(i.a)(t,2),r=n[0],c=n[1],s=y(),o=N((function(e){return e.authReducer.isAuthorized})),d=Object(j.h)(),l=function(e){c(Object(Y.a)(Object(Y.a)({},r),{},Object(Ee.a)({},e.target.name,e.target.value)))},u=Object(a.useCallback)((function(e){var t;e.preventDefault(),s((t=r,function(e){fetch("".concat(L,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t.email,password:t.password})}).then($).then((function(t){if(!t.success)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445");te("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),e({type:G,data:t.user})})).catch((function(e){console.log(e)}))}))}),[r,s]);return o?Object(p.jsx)(j.a,{to:(null===(e=d.state)||void 0===e?void 0:e.from)||"/"}):Object(p.jsxs)("div",{className:Te.a.main,children:[Object(p.jsxs)("form",{onSubmit:u,className:Te.a.form+" mb-20",children:[Object(p.jsx)("h1",{className:Te.a.heading+" text text_type_main-large mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.EmailInput,{value:r.email,name:"email",onChange:l})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.PasswordInput,{value:r.password,name:"password",onChange:l})}),Object(p.jsx)(m.Button,{type:"primary",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(p.jsxs)("div",{className:Te.a.footerLine,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(p.jsx)(b.b,{to:"/register",className:Re.a.link+" text text_type_main-default ml-2",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("div",{className:Te.a.footerLine+" mt-4",children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(b.b,{to:"/forgot-password",className:Re.a.link+" text text_type_main-default ml-2",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},Ae=n(57),De=n.n(Ae),Me=function(e){var t,n=Object(j.g)(),r=Object(a.useState)({name:"",email:"",password:""}),c=Object(i.a)(r,2),s=c[0],o=c[1],d=y(),l=N((function(e){return e.authReducer.isAuthorized})),u=function(e){o(Object(Y.a)(Object(Y.a)({},s),{},Object(Ee.a)({},e.target.name,e.target.value)))},_=Object(a.useCallback)((function(e){var t;e.preventDefault(),d((t=s,function(e){fetch("".concat(L,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t.email,password:t.password,name:t.name})}).then($).then((function(t){if(!t.success)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445");te("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),e({type:F,data:t.user})})).catch((function(e){console.log(e)}))}))}),[s,d]);return Object(a.useEffect)((function(){l&&n.replace({pathname:"/"})}),[n,l]),l?Object(p.jsx)(j.a,{to:(null===(t=e.state)||void 0===t?void 0:t.from)||"/"}):Object(p.jsxs)("div",{className:De.a.main,children:[Object(p.jsxs)("form",{onSubmit:_,className:De.a.form+" mb-20",children:[Object(p.jsx)("h1",{className:De.a.heading+" text text_type_main-large mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.Input,{placeholder:"\u0418\u043c\u044f",value:s.name,name:"name",onChange:u})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.EmailInput,{value:s.email,name:"email",onChange:u})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.PasswordInput,{value:s.password,name:"password",onChange:u})}),Object(p.jsx)(m.Button,{type:"primary",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("div",{className:De.a.footerLine,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(p.jsx)(b.b,{to:"/login",className:Re.a.link+" text text_type_main-default ml-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Be=n(58),He=n.n(Be);var ze=function(){var e=Object(a.useState)({email:""}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(j.g)(),s=N((function(e){return e.authReducer.isAuthorized})),o=Object(a.useCallback)((function(e){var t;e.preventDefault(),(t=n.email,fetch("".concat(L,"/password-reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))).then((function(e){e.success&&c.replace({pathname:"/reset-password"})})).catch((function(e){console.log(e.message)}))}),[n,c]);return s?Object(p.jsx)(j.a,{to:"/"}):Object(p.jsxs)("div",{className:He.a.main,children:[Object(p.jsxs)("form",{className:He.a.form+" mb-20",onSubmit:o,children:[Object(p.jsx)("h1",{className:He.a.heading+" text text_type_main-large mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.EmailInput,{value:n.email,name:"email",onChange:function(e){r(Object(Y.a)(Object(Y.a)({},n),{},Object(Ee.a)({},e.target.name,e.target.value)))}})}),Object(p.jsx)(m.Button,{type:"primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(p.jsxs)("div",{className:He.a.footerLine,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(b.b,{to:"/login",className:Re.a.link+" text text_type_main-default ml-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Ge=n(59),Fe=n.n(Ge);var Ue=function(){var e=Object(a.useState)({code:"",password:""}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(j.g)(),s=!1;"PUSH"!==c.action&&"REPLACE"!==c.action||"/reset-password"===c.location.pathname&&(s=!0),s||c.replace({pathname:"/"});var o=function(e){r(Object(Y.a)(Object(Y.a)({},n),{},Object(Ee.a)({},e.target.name,e.target.value)))},d=Object(a.useCallback)((function(e){var t,a;e.preventDefault(),(t=n.password,a=n.code,fetch("".concat(L,"/password-reset/reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,token:a})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))).then((function(e){e.success&&c.replace({pathname:"/"})})).catch((function(e){console.log(e)}))}),[n,c]);return Object(p.jsxs)("div",{className:Fe.a.main,children:[Object(p.jsxs)("form",{onSubmit:d,className:Fe.a.form+" mb-20",children:[Object(p.jsx)("h1",{className:Fe.a.heading+" text text_type_main-large mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.PasswordInput,{value:n.password,name:"password",onChange:o})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(m.Input,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:n.code,name:"code",onChange:o})}),Object(p.jsx)(m.Button,{type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(p.jsxs)("div",{className:Fe.a.footerLine,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(p.jsx)(b.b,{to:"/login",className:Re.a.link+" text text_type_main-default ml-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Je=n(16),qe=n.n(Je);var We=function(){var e=y(),t=N((function(e){return e.authReducer.user})),n=Object(a.useState)({name:"",password:"",email:""}),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(!1),d=Object(i.a)(o,2),l=d[0],u=d[1],j=function(e){s(Object(Y.a)(Object(Y.a)({},c),{},Object(Ee.a)({},e.target.name,e.target.value))),u(!0),console.log(c)};Object(a.useEffect)((function(){s(t)}),[t]);var _=l?{}:{opacity:.5,cursor:"default"};return Object(p.jsxs)("div",{className:qe.a.main,children:[Object(p.jsxs)("div",{className:qe.a.nav+" mr-15",children:[Object(p.jsx)(b.c,{to:{pathname:"/profile"},className:qe.a.link+" text text_type_main-medium",activeClassName:qe.a.activeLink+" text text_type_main-medium",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(p.jsx)(b.c,{to:{pathname:"/profile/orders"},className:qe.a.link+" text text_type_main-medium",activeClassName:qe.a.activeLink+" text text_type_main-medium",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsx)("div",{className:qe.a.exitLink+" text text_type_main-medium",onClick:function(t){e(Q())},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(p.jsx)("p",{className:qe.a.text+" text text_type_main-default mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(p.jsxs)("form",{className:qe.a.form+" mb-20",onSubmit:function(t){var n;t.preventDefault(),l&&e((n=c,function(e){ee("".concat(L,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",authorization:ne("accessToken")},body:JSON.stringify({name:n.name,email:n.email,password:n.password})}).then((function(t){if(!t.success)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445");e({type:J,data:t.user})})).catch((function(e){console.log(e)}))}))},children:[Object(p.jsx)("div",{className:qe.a.input+" mb-6",children:Object(p.jsx)(m.Input,{placeholder:"\u0418\u043c\u044f",value:c.name||"",name:"name",onChange:j})}),Object(p.jsx)("div",{className:qe.a.input+" mb-6",children:Object(p.jsx)(m.EmailInput,{value:c.email||"",name:"email",onChange:j})}),Object(p.jsx)("div",{className:qe.a.input+" mb-6",children:Object(p.jsx)(m.PasswordInput,{value:c.password||"",name:"password",onChange:j})}),Object(p.jsxs)("div",{className:qe.a.buttons,children:[Object(p.jsx)("div",{style:_,children:Object(p.jsx)(m.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(p.jsx)(m.Button,{onClick:function(e){s(t)},type:"secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})},Xe=n(119),Ze=["children"],Ke=function(e){var t=e.children,n=Object(Xe.a)(e,Ze),r=Object(a.useState)(!1),c=Object(i.a)(r,2),s=c[0],o=c[1],d=N((function(e){return e.authReducer.isAuthorized})),l=y(),u=function(){var e=Object(T.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l((function(e){return ee("".concat(L,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",authorization:ne("accessToken")}}).then((function(t){if(!t.success)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445");e({type:J,data:t.user})})).catch((function(e){console.log(e)}))}));case 2:o(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u()}),[]),s?Object(p.jsx)(j.b,Object(Y.a)(Object(Y.a)({},n),{},{render:function(e){var n=e.location;return d?t:Object(p.jsx)(j.a,{to:{pathname:"/login",state:{from:n}}})}})):Object(p.jsx)(k,{})},Ve=n(32),Ye=n.n(Ve);var Qe=function(){var e=Object(j.i)().id,t=N((function(e){return e.burgerReducer.ingredients})).find((function(t){return t._id===e}));return t?Object(p.jsxs)("div",{className:Ye.a.bigCard,children:[Object(p.jsx)("h1",{className:Ye.a.label+" text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(p.jsx)("img",{src:t.image_large,alt:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442",className:"mr-5 ml-5"}),Object(p.jsx)("p",{className:Ye.a.bigCardName+" text text_type_main-medium mt-4",children:t.name}),Object(p.jsxs)("div",{className:Ye.a.nutrients+" mt-8 mb-15",children:[Object(p.jsxs)("div",{className:Ye.a.nutrient+" mr-5",children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.calories})]}),Object(p.jsxs)("div",{className:Ye.a.nutrient+" mr-5",children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.proteins})]}),Object(p.jsxs)("div",{className:Ye.a.nutrient+" mr-5",children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.fat})]}),Object(p.jsxs)("div",{className:Ye.a.nutrient,children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.carbohydrates})]})]})]}):Object(p.jsx)("div",{})},$e=n(36),et=n.n($e);var tt=function(){var e=Object(j.i)().id,t=N((function(e){return e.burgerReducer.ingredients})).find((function(t){return t._id===e}));return t?Object(p.jsxs)("div",{className:et.a.bigCard,children:[Object(p.jsx)("img",{src:t.image_large,alt:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442",className:"mr-5 ml-5"}),Object(p.jsx)("p",{className:et.a.bigCardName+" text text_type_main-medium mt-4",children:t.name}),Object(p.jsxs)("div",{className:et.a.nutrients+" mt-8 mb-15",children:[Object(p.jsxs)("div",{className:et.a.nutrient+" mr-5",children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.calories})]}),Object(p.jsxs)("div",{className:et.a.nutrient+" mr-5",children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.proteins})]}),Object(p.jsxs)("div",{className:et.a.nutrient+" mr-5",children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.fat})]}),Object(p.jsxs)("div",{className:et.a.nutrient,children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:t.carbohydrates})]})]})]}):Object(p.jsx)("div",{})},nt=n(71),at=n.n(nt),rt=n(72),ct=n.n(rt),st=n(27),it=n.n(st),ot=n(216),dt=n(222),lt=n(218),ut=n(217),mt=n(221),jt=function(e){var t=e.data,n=(e.onModalOpen,e.path),a=Object(j.g)(),r=Object(j.h)();var c="";c=Object(ot.a)(Date.parse(t.createdAt))?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":Object(dt.a)(Date.parse(t.createdAt))?"\u0412\u0447\u0435\u0440\u0430, ":Object(lt.a)(Date.parse(t.createdAt),{locale:mt.a})+" \u043d\u0430\u0437\u0430\u0434, ",c+=Object(ut.a)(Date.parse(t.createdAt),"HH:mm zzz");var s=N((function(e){return e.burgerReducer.ingredients})),i=[];t.ingredients.forEach((function(e){var t=s.findIndex((function(t){return t._id===e}));t>=0&&i.push(s[t])}));for(var o=0,d=0,l=i;d<l.length;d++){var u=l[d];u&&(o+="bun"===u.type?2*u.price:u.price)}return Object(p.jsxs)("div",{className:it.a.order+" pt-6 pr-6 pb-6 pl-6 mr-2",onClick:function(){a.push({pathname:"".concat(n).concat(t.number),state:{background:r}})},children:[Object(p.jsxs)("div",{className:it.a.number,children:[Object(p.jsx)("p",{className:"text text_type_digits-default",children:"#"+String(t.number).padStart(6,"0")}),Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c})]}),Object(p.jsx)("p",{className:it.a.burgerName+" text text_type_main-medium mt-6",children:t.name}),Object(p.jsxs)("div",{className:it.a.orderContent+" mt-6",children:[Object(p.jsx)("div",{className:it.a.ingredients,children:i.map((function(e,t){if(!e||t>5)return null;var n="";return 5===t&&i.length>6&&(n="+"+(i.length-5)),Object(p.jsxs)("div",{className:it.a.image,children:[Object(p.jsx)("img",{alt:"\u0424\u043e\u0442\u043e",src:e.image_mobile,className:it.a.circles}),n&&Object(p.jsx)("p",{className:it.a.remains+" text text_type_main-default",children:n})]},t.toString())}))}),Object(p.jsxs)("div",{className:it.a.price,children:[Object(p.jsx)("p",{className:"text text_type_digits-default mr-2",children:o}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]})]})]})},bt=function(e){var t=e.onModalOpen,n=e.recivedData,a=e.path;return Object(p.jsx)("section",{className:ct.a.section,children:Object(p.jsx)("div",{className:ct.a.orders,children:Object(p.jsx)("div",{className:ct.a.chapter+" mt-6",children:n.orders.map((function(e){return Object(p.jsx)(jt,{data:e,onModalOpen:t,path:a},e._id)}))})})})},pt=n(37),_t=n.n(pt),xt=function(e){e.onModalOpen;var t=e.recivedData;return Object(p.jsxs)("div",{className:_t.a.list+" mt-25 mb-4 pr-4",children:[Object(p.jsxs)("div",{className:_t.a.columns,children:[Object(p.jsxs)("div",{className:_t.a.done,children:[Object(p.jsx)("p",{className:_t.a.doneNumbers+" mb-4 text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsx)("div",{className:_t.a.doneList,children:t.orders.map((function(e){return"done"===e.status?Object(p.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:String(e.number).padStart(6,"0")},e._id):null}))})]}),Object(p.jsxs)("div",{className:_t.a.work,children:[Object(p.jsx)("p",{className:_t.a.doneNumbers+" mb-4 text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),t.orders.map((function(e){return"done"!==e.status?Object(p.jsx)("p",{className:"text text_type_digits-default",children:String(e.number).padStart(6,"0")},e._id):null}))]})]}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(p.jsx)("p",{className:"text text_type_digits-large",children:t.total}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(p.jsx)("p",{className:"text text_type_digits-large",children:t.totalToday})]})},Ot=function(e){var t=e.onModalOpen,n=N((function(e){return e.wsReducer.messages})),r=y();return Object(a.useEffect)((function(){return r({type:q,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){r({type:W})}}),[r]),n.success?Object(p.jsxs)("div",{className:at.a.main,children:[Object(p.jsxs)("div",{className:at.a.feed+" mr-10",children:[Object(p.jsx)("h1",{className:"".concat(at.a.label," text text_type_main-large mt-10 mb-5"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsx)(bt,{onModalOpen:t,recivedData:n,path:"/feed/"})]}),Object(p.jsx)(xt,{onModalOpen:t,recivedData:n})]}):Object(p.jsx)(k,{})},ht=n(19),ft=n.n(ht);var gt=function(){var e=Object(j.i)().id,t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1],s=N((function(e){return e.wsReducer.messages.orders})),o=N((function(e){return e.burgerReducer.ingredients})),d=" mt-25",l=Object(j.g)();if("PUSH"!==l.action&&"REPLACE"!==l.action||(d=""),Object(a.useEffect)((function(){var t,n=s.find((function(t){return t.number===Number(e)}));n?c(n):(t=Number(e),fetch("".concat(L,"/orders/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))).then((function(e){e.success&&c(e.orders[0])}))}),[e,s]),!r)return null;var u="";u=Object(ot.a)(Date.parse(r.createdAt))?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":Object(dt.a)(Date.parse(r.createdAt))?"\u0412\u0447\u0435\u0440\u0430, ":Object(lt.a)(Date.parse(r.createdAt),{locale:mt.a})+" \u043d\u0430\u0437\u0430\u0434, ",u+=Object(ut.a)(Date.parse(r.createdAt),"HH:mm zzz");var b=[];r.ingredients.forEach((function(e){var t=o.findIndex((function(t){return t._id===e}));t>=0&&b.push(o[t])}));for(var _=0,x=0,O=b;x<O.length;x++){var h=O[x];h&&(_+="bun"===h.type?2*h.price:h.price)}var f="";switch(r.status){case"done":f="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";break;case"created":f="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":f="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}return Object(p.jsxs)("div",{className:ft.a.bigCard,children:[d&&Object(p.jsx)("div",{className:"mt-25"}),Object(p.jsx)("p",{className:ft.a.number+" text text_type_digits-default",children:"#"+String(r.number).padStart(6,"0")}),Object(p.jsx)("p",{className:ft.a.burgerName+" text text_type_main-medium mt-6 mb-2",children:r.name}),Object(p.jsx)("p",{className:ft.a.burgerStatus+" text text_type_main-small text_color_inactive",children:f}),Object(p.jsx)("p",{className:ft.a.burgerName+" text text_type_main-medium mt-15 mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("div",{className:ft.a.list+" mb-10 pr-6",children:b.map((function(e,t){if(!e)return null;var n=("bun"===e.type?"2 x ":"1 x ")+e.price;return Object(p.jsxs)("div",{className:ft.a.row,children:[Object(p.jsx)("img",{alt:"\u0424\u043e\u0442\u043e",src:e.image_mobile,className:ft.a.image+" mr-6"}),Object(p.jsx)("p",{className:ft.a.ingredientName+" text text_type_main-default mr-4",children:e.name}),Object(p.jsx)("p",{className:ft.a.remains+" text text_type_main-default mr-2",children:n}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]},t)}))}),Object(p.jsxs)("div",{className:ft.a.footer+" mb-10",children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:u}),Object(p.jsxs)("div",{className:ft.a.price,children:[Object(p.jsx)("p",{className:"text text_type_digits-default mr-2",children:_}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]})]})]})},vt=n(38),Nt=n.n(vt),yt=function(e){var t=e.onModalOpen,n=y(),r=N((function(e){return e.wsReducer.messages}));return Object(a.useEffect)((function(){var e=ne("accessToken").replace("Bearer ","");return n({type:q,payload:"".concat("wss://norma.nomoreparties.space/orders","?token=").concat(e)}),function(){n({type:W})}}),[n]),Object(p.jsxs)("div",{className:Nt.a.main,children:[Object(p.jsxs)("div",{className:Nt.a.nav+" mr-15",children:[Object(p.jsx)(b.b,{to:{pathname:"/profile"},className:Nt.a.link+" text text_type_main-medium",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(p.jsx)(b.b,{to:{pathname:"/profile/orders"},className:Nt.a.activeLink+" text text_type_main-medium",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsx)("div",{className:Nt.a.exitLink+" text text_type_main-medium",onClick:function(e){n(Q())},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(p.jsx)("p",{className:Nt.a.text+" text text_type_main-default mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(p.jsx)("div",{className:Nt.a.form+" mb-20",children:Object(p.jsx)(bt,{onModalOpen:t,recivedData:r,path:"/profile/orders/"})})]})};var Ct=function(){var e,t=r.a.useState(!1),n=Object(i.a)(t,2),c=n[0],s=n[1],o=r.a.useState(""),l=Object(i.a)(o,2),u=l[0],m=l[1],b=r.a.useState(""),x=Object(i.a)(b,2),O=x[0],h=x[1],f=Object(j.g)(),g=Object(j.h)(),v=y(),N=Object(p.jsx)(tt,{}),C=Object(p.jsx)(gt,{});function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m(e),h(t),s(!0)}function k(){s(!1),v({type:A})}function I(){f.goBack()}return e="PUSH"===f.action||"REPLACE"===f.action?g.state&&g.state.background:void 0,Object(a.useEffect)((function(){v((function(e){fetch(L+"/ingredients").then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){if(!t.success)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445");e({type:R,data:t.data})})).catch((function(e){console.log(e.message)}))}))}),[v]),Object(p.jsxs)("div",{className:d.a.App,children:[Object(p.jsxs)(j.d,{location:e||g,children:[Object(p.jsxs)(j.b,{path:"/",exact:!0,children:[Object(p.jsx)(_,{}),Object(p.jsx)(fe,{onModalOpen:S}),c&&Object(p.jsx)(ke,{onClose:k,header:O,children:u})]}),Object(p.jsxs)(j.b,{path:"/feed",exact:!0,children:[Object(p.jsx)(_,{}),Object(p.jsx)(Ot,{onModalOpen:S}),c&&Object(p.jsx)(ke,{onClose:k,header:O,children:u})]}),Object(p.jsxs)(Ke,{path:"/profile/orders",exact:!0,children:[Object(p.jsx)(_,{}),Object(p.jsx)(yt,{onModalOpen:S}),c&&Object(p.jsx)(ke,{onClose:k,header:O,children:u})]}),Object(p.jsxs)(Ke,{path:"/profile/orders/:id",children:[Object(p.jsx)(_,{}),Object(p.jsx)(gt,{})]}),Object(p.jsxs)(j.b,{path:"/login",children:[Object(p.jsx)(_,{}),Object(p.jsx)(Pe,{})]}),Object(p.jsxs)(j.b,{path:"/register",children:[Object(p.jsx)(_,{}),Object(p.jsx)(Me,{})]}),Object(p.jsxs)(j.b,{path:"/forgot-password",children:[Object(p.jsx)(_,{}),Object(p.jsx)(ze,{})]}),Object(p.jsxs)(j.b,{path:"/reset-password",children:[Object(p.jsx)(_,{}),Object(p.jsx)(Ue,{})]}),Object(p.jsxs)(Ke,{path:"/profile",children:[Object(p.jsx)(_,{}),Object(p.jsx)(We,{})]}),Object(p.jsxs)(j.b,{path:"/ingredients/:id",children:[Object(p.jsx)(_,{}),Object(p.jsx)(Qe,{})]}),Object(p.jsxs)(j.b,{path:"/feed/:id",children:[Object(p.jsx)(_,{}),Object(p.jsx)(gt,{})]}),Object(p.jsxs)(j.b,{path:"/",children:[Object(p.jsx)(_,{}),Object(p.jsx)(Ie,{})]})]}),e&&Object(p.jsx)(j.b,{path:"/ingredients/:id",children:Object(p.jsx)(ke,{onClose:I,header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:N})}),e&&Object(p.jsx)(j.b,{path:"/feed/:id",children:Object(p.jsx)(ke,{onClose:I,header:"",children:C})}),e&&Object(p.jsx)(Ke,{path:"/profile/orders/:id",children:Object(p.jsx)(ke,{onClose:I,header:"",children:C})})]})},St=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,223)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},kt=n(34),It=n(120),Et=n(40),wt={ingredients:[],constructor:[],ingredient:{},order:0},Tt={user:{email:"",password:""},accessToken:"",isAuthorized:!1},Lt={wsConnected:!1,messages:{success:!1,orders:[],total:0,totalToday:0}},Rt=Object(kt.b)({burgerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(Y.a)(Object(Y.a)({},e),{},{ingredients:t.data.map((function(e){return e.count=0,e}))});case P:return Object(Y.a)(Object(Y.a)({},e),{},{ingredient:t.item});case A:return Object(Y.a)(Object(Y.a)({},e),{},{ingredient:{},order:0});case D:return Object(Y.a)(Object(Y.a)({},e),{},{order:t.number});case M:return Object(Y.a)(Object(Y.a)({},e),{},{constructor:[].concat(Object(Et.a)(e.constructor),[Object(Y.a)(Object(Y.a)({},t.item),{},{constId:t.id})]),ingredients:Object(Et.a)(e.ingredients).map((function(e){return e._id===t.item._id?Object(Y.a)(Object(Y.a)({},e),{},{count:e.count+t.qnt}):e}))});case B:return Object(Y.a)(Object(Y.a)({},e),{},{constructor:Object(Et.a)(e.constructor).filter((function(e){return e.constId!==t.item.constId})),ingredients:Object(Et.a)(e.ingredients).map((function(e){return e._id===t.item._id?Object(Y.a)(Object(Y.a)({},e),{},{count:e.count-t.qnt}):e}))});case H:var n=Object(Et.a)(e.constructor),a=n[t.dragIndex];return n.splice(t.dragIndex,1),n.splice(t.hoverIndex,0,a),Object(Y.a)(Object(Y.a)({},e),{},{constructor:n});case z:return Object(Y.a)(Object(Y.a)({},e),{},{constructor:[],ingredients:Object(Et.a)(e.ingredients).map((function(e){return e.count=0,e}))});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:case F:return Object(Y.a)(Object(Y.a)({},e),{},{user:t.data,isAuthorized:!0});case U:return Object(Y.a)(Object(Y.a)({},e),{},{user:{email:"",password:""},isAuthorized:!1});case J:return Object(Y.a)(Object(Y.a)({},e),{},{user:t.data,isAuthorized:!0});default:return e}},wsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(Y.a)(Object(Y.a)({},e),{},{error:void 0,wsConnected:!0});case Z:return Object(Y.a)(Object(Y.a)({},e),{},{error:t.payload,wsConnected:!1});case K:return Object(Y.a)(Object(Y.a)({},e),{},{error:void 0,wsConnected:!1});case V:return Object(Y.a)(Object(Y.a)({},e),{},{error:void 0,messages:t.payload});default:return e}}}),Pt=q,At=W,Dt="WS_SEND_MESSAGE",Mt=X,Bt=K,Ht=Z,zt=V;var Gt=function(){var e=function(e){var t=null;return function(n){return function(a){var r,c=e.dispatch,s=a.type,i=a.payload,o=At,d=Dt,l=Mt,u=Bt,m=Ht,j=zt;if(s===Pt&&(t=new WebSocket(i)),s===o&&(null===(r=t)||void 0===r||r.close()),t&&(t.onopen=function(e){c({type:l,payload:e})},t.onerror=function(e){c({type:m,payload:e})},t.onmessage=function(e){var t=e.data;c({type:j,payload:JSON.parse(t)})},t.onclose=function(e){c({type:u,payload:e})},s===d)){var b=i;t.send(JSON.stringify(b))}n(a)}}},t=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):kt.c)(Object(kt.a)(It.a,e));return Object(kt.d)(Rt,t)}();s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(v.a,{store:Gt,children:Object(p.jsx)(b.a,{children:Object(p.jsx)(Ct,{})})})}),document.getElementById("root")),St()},26:function(e,t,n){e.exports={section:"BurgerIngredients_section__2_sVq",tab:"BurgerIngredients_tab__2RpA4",chapterLabel:"BurgerIngredients_chapterLabel__3UgSQ",chapter:"BurgerIngredients_chapter__2eGjP",ingredients:"BurgerIngredients_ingredients__1N8v2"}},27:function(e,t,n){e.exports={order:"Order_order__RDg-A",feed:"Order_feed__3dblE",number:"Order_number__WdRyX",burgerName:"Order_burgerName__13k2U",orderContent:"Order_orderContent__1ZttE",price:"Order_price__12m_E",ingredients:"Order_ingredients__1iQ4L",circles:"Order_circles__BdvMB",image:"Order_image__dL89q",remains:"Order_remains__vyTVl"}},29:function(e,t,n){e.exports={link:"global_link__11u7z"}},31:function(e,t,n){e.exports={spinner:"Preloader_spinner__3gLw2",dot:"Preloader_dot__npvPn",rotate:"Preloader_rotate__YCBOy",pulse:"Preloader_pulse__Omb-j"}},32:function(e,t,n){e.exports={bigCard:"IngredientInfo_bigCard__2Yh4E",nutrients:"IngredientInfo_nutrients__1cAtX",nutrient:"IngredientInfo_nutrient__2NtS0",bigCardName:"IngredientInfo_bigCardName__1y368",label:"IngredientInfo_label__Scrf9"}},36:function(e,t,n){e.exports={bigCard:"IngredientDetails_bigCard__2KaxM",nutrients:"IngredientDetails_nutrients__1o7wU",nutrient:"IngredientDetails_nutrient__2I0eB",bigCardName:"IngredientDetails_bigCardName__36cfc"}},37:function(e,t,n){e.exports={list:"OrdersSummary_list__1OWW2",columns:"OrdersSummary_columns__3NO5R",done:"OrdersSummary_done__32Vwb",doneList:"OrdersSummary_doneList__2icgg",work:"OrdersSummary_work__2iG08",doneNumbers:"OrdersSummary_doneNumbers__1_OF6"}},38:function(e,t,n){e.exports={form:"OrdersHistory_form__3HOqZ",nav:"OrdersHistory_nav__4fBaf",main:"OrdersHistory_main__1NcBd",footerLine:"OrdersHistory_footerLine__149tZ",link:"OrdersHistory_link__FC6Al",exitLink:"OrdersHistory_exitLink__2FOVs",activeLink:"OrdersHistory_activeLink__3l3kY",text:"OrdersHistory_text__u812b"}},45:function(e,t,n){e.exports={bigCard:"OrderDetails_bigCard__2hLnh",order:"OrderDetails_order__3pGzU",stationText:"OrderDetails_stationText__1oIgE",done:"OrderDetails_done__2y57Z"}},46:function(e,t,n){e.exports={modal:"Modal_modal__P3_V5",buttonClose:"Modal_buttonClose__2pdSk",header:"Modal_header__StajR",label:"Modal_label__1ipzf",children:"Modal_children__3R2Fy"}},47:function(e,t,n){e.exports={form:"Login_form__3bufY",heading:"Login_heading__2GvJc",main:"Login_main__CU5LU",footerLine:"Login_footerLine__2SAuA"}},57:function(e,t,n){e.exports={form:"Register_form__1kKs6",heading:"Register_heading__2iyxA",main:"Register_main__2ct8w",footerLine:"Register_footerLine__1-3gM"}},58:function(e,t,n){e.exports={form:"ForgotPassword_form__1nQuw",heading:"ForgotPassword_heading__2ahH3",main:"ForgotPassword_main__1xc_K",footerLine:"ForgotPassword_footerLine__vprhg"}},59:function(e,t,n){e.exports={form:"ResetPassword_form__2P1rR",heading:"ResetPassword_heading__127Zj",main:"ResetPassword_main__3Fapx",footerLine:"ResetPassword_footerLine__3IBhJ"}},69:function(e,t,n){e.exports={list:"BurgerConstructor_list__lE5PO",footer:"BurgerConstructor_footer__1m9Od",total:"BurgerConstructor_total__3LNMz"}},70:function(e,t,n){e.exports={card:"Ingredient_card__Cif_s",price:"Ingredient_price__3ii0a"}},71:function(e,t,n){e.exports={main:"Feed_main__xeU2D",label:"Feed_label__1Gou-",feed:"Feed_feed__I3EXS"}},72:function(e,t,n){e.exports={chapter:"FeedContent_chapter__2BNm2",orders:"FeedContent_orders__dYhY3"}},94:function(e,t,n){e.exports={main:"Main_main__3de2d",label:"Main_label__A2nyS"}}},[[210,1,2]]]);
//# sourceMappingURL=main.80aaad1d.chunk.js.map