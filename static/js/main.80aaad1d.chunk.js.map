{"version":3,"sources":["components/App/App.module.css","components/ConstructorIngredient/ConstructorIngredient.module.css","components/ModalOverlay/ModalOverlay.module.css","components/AppHeader/AppHeader.module.css","pages/Profile/Profile.module.css","components/OrderComposition/OrderComposition.module.css","components/AppHeader/AppHeader.tsx","images/done.svg","utils/hooks.ts","pages/Preloader/Preloader.tsx","components/OrderDetails/OrderDetails.tsx","utils/const.ts","services/actions/index.ts","services/actions/authActions.ts","components/ConstructorIngredient/ConstructorIngredient.tsx","components/BurgerConstructor/BurgerConstructor.tsx","services/actions/burgerActions.ts","components/Ingredient/Ingredient.tsx","components/BurgerIngredients/BurgerIngredients.tsx","components/Main/Main.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","components/Page404/Page404.tsx","pages/Login/Login.tsx","pages/Register/Register.tsx","pages/ForgotPassword/ForgotPassword.tsx","utils/auth.ts","pages/ResetPassword/ResetPassword.tsx","pages/Profile/Profile.tsx","components/ProtectedRoute/ProtectedRoute.tsx","pages/IngredientInfo/IngredientInfo.tsx","components/IngredientDetails/IngredientDetails.tsx","components/Order/Order.tsx","components/FeedContent/FeedContent.tsx","components/OrdersSummary/OrdersSummary.tsx","pages/Feed/Feed.tsx","components/OrderComposition/OrderComposition.tsx","pages/OrdersHistory/OrdersHistory.tsx","components/App/App.tsx","reportWebVitals.ts","services/reducers/burgerReducers.ts","services/reducers/authReducers.ts","services/reducers/wsReducers.ts","services/reducers/index.ts","services/middleware/socketMiddleware.ts","index.tsx","services/store.ts","components/BurgerIngredients/BurgerIngredients.module.css","components/Order/Order.module.css","utils/global.module.css","pages/Preloader/Preloader.module.css","pages/IngredientInfo/IngredientInfo.module.css","components/IngredientDetails/IngredientDetails.module.css","components/OrdersSummary/OrdersSummary.module.css","pages/OrdersHistory/OrdersHistory.module.css","components/OrderDetails/OrderDetails.module.css","components/Modal/Modal.module.css","pages/Login/Login.module.css","pages/Register/Register.module.css","pages/ForgotPassword/ForgotPassword.module.css","pages/ResetPassword/ResetPassword.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/Ingredient/Ingredient.module.css","pages/Feed/Feed.module.css","components/FeedContent/FeedContent.module.css","components/Main/Main.module.css"],"names":["module","exports","AppHeader","React","useState","activeNav","setActiveNav","path","useRouteMatch","useEffect","className","stylesAppHeader","header","navigate","burgers","to","menuItemActive","menuItem","type","logo","menuItemLs","useSelector","selectorHook","useDispatch","dispatchHook","Preloader","styles","spinner","dot","id","in","stdDeviation","result","mode","values","in2","OrderDetails","order","store","burgerReducer","stylesOrderDetails","bigCard","src","imageDone","alt","done","stationText","BASE_URL","LOAD_INGREDIENTS","LOAD_DETAILS","DELETE_DETAILS","ORDER_NUMBER","ADD_INGREDIENT","DELETE_INGREDIENT","CHANGE_INGREDIENT","ORDER_CLEAR","LOGIN_USER","REGISTER_USER","LOGOUT_USER","CHEK_TOKEN","WS_CONNECTION_START","WS_CONNECTION_CLOSE","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","logout","dispatch","fetch","method","headers","body","JSON","stringify","token","localStorage","getItem","then","checkReponse","answer","success","Promise","reject","setCookie","removeItem","catch","error","console","log","res","ok","json","err","fetchWithRefresh","url","options","a","message","refreshData","setItem","refreshToken","accessToken","authorization","name","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","ConstructorIngredient","item","index","moveElement","ref","useRef","useDrag","collect","monitor","isDragging","dragRef","useDrop","accept","hover","hoverBoundingRect","current","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y","opacity","dropRef","stylesConstructorIngredient","burgerItem","style","handleClose","qnt","text","price","thumbnail","image_mobile","constId","initialState","total","BurgerConstructor","onModalOpen","data","constructor","now","auth","authReducer","isAuthorized","history","useHistory","drop","onDropHandler","dropTarget","bunElement","find","el","burgerBun","useReducer","reduce","sum","stateTotal","dispatchTotal","dragIndex","hoverIndex","inactiveButtonStyle","cursor","isLocked","stylesBurgerConstructor","list","map","footer","size","onClick","orderArray","_id","ingredients","status","number","response","postOrder","pathname","Ingredient","location","useLocation","stylesIngredient","card","push","state","background","image","counter","count","BurgerIngredients","setCurrent","bunArray","filter","mainArray","sauceArray","ingredientsWindow","querySelector","sauceElement","mainElement","stylesBurgerIngredients","section","tab","active","onScroll","bunLength","Math","abs","sauceLength","mainLength","rightTabLength","min","chapterLabel","chapter","Main","stylesMain","main","DndProvider","backend","HTML5Backend","label","ModalOverlay","stylesModalOverlay","overlay","modalRoot","getElementById","Modal","children","onClose","onPressEsc","useCallback","evt","key","preventDefault","addEventListener","removeEventListener","ReactDOM","createPortal","stylesModal","modal","buttonClose","Page404","Login","email","password","form","setValue","onChange","e","target","loginListener","user","from","stylesLogin","onSubmit","heading","footerLine","stylesGlobal","link","Register","registerListener","stylesRegister","placeholder","ForgotPassword","passwordReset","Accept","stylesForgotPassword","ResetPassword","code","permission","action","passwordCreate","stylesResetPassword","Profile","changed","setChanged","stylesProfile","nav","activeClassName","activeLink","exitLink","input","buttons","ProtectedRoute","rest","isUserLoaded","setUserLoaded","init","render","IngredientInfo","useParams","stylesIngredientInfo","image_large","bigCardName","nutrients","nutrient","calories","proteins","fat","carbohydrates","IngredientDetails","stylesIngredientDetails","Order","stringOfDate","isToday","parse","createdAt","isYesterday","formatDistanceToNow","locale","ru","format","ingredientsData","ingredientsArray","forEach","indexOfIngredient","findIndex","String","padStart","burgerName","orderContent","remains","length","circles","toString","FeedContent","recivedData","orders","OrdersSummary","columns","doneNumbers","doneList","work","totalToday","Feed","wsReducer","messages","payload","feed","OrderComposition","items","needHeader","foundedOrder","Number","statusName","burgerStatus","priceString","row","ingredientName","OrdersHistory","App","modalIsOpen","setModalIsOpen","modalChild","setModalChild","modalHeader","setModalHeader","ingredientModalChild","orderModalChild","modalContent","modalHeaderLabel","onModalClose","onIngredientModalClose","goBack","undefined","stylesApp","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ingredient","wsConnected","rootReducer","combineReducers","newConstructor","dragIngredient","splice","wsActions","wsCreatedMiddleware","socket","next","wsClose","wsSendMessage","onOpen","onError","onMessage","WebSocket","close","onopen","event","onerror","onmessage","onclose","send","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","configureStore","StrictMode"],"mappings":"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","file":"static/js/main.80aaad1d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__aOmNj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerItem\":\"ConstructorIngredient_burgerItem__kSq-9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"ModalOverlay_overlay__M4729\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__X9aJA\",\"navigate\":\"AppHeader_navigate__2nXZk\",\"menuItem\":\"AppHeader_menuItem__2FHPz\",\"menuItemActive\":\"AppHeader_menuItemActive__2rIr1 AppHeader_menuItem__2FHPz\",\"burgers\":\"AppHeader_burgers__3SQyx\",\"logo\":\"AppHeader_logo__3VxwD\",\"menuItemLs\":\"AppHeader_menuItemLs__1vMr9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Profile_form__337o4\",\"nav\":\"Profile_nav__3aSRW\",\"main\":\"Profile_main__YfNHw\",\"footerLine\":\"Profile_footerLine__z_eT6\",\"link\":\"Profile_link__sv_tt\",\"exitLink\":\"Profile_exitLink__3wSeb\",\"activeLink\":\"Profile_activeLink__viT_t\",\"text\":\"Profile_text__24QG7\",\"input\":\"Profile_input__2BMzb\",\"buttons\":\"Profile_buttons__3S8_2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigCard\":\"OrderComposition_bigCard__1IH2f\",\"bigCardName\":\"OrderComposition_bigCardName__1KOWv\",\"number\":\"OrderComposition_number__v5KPG\",\"burgerName\":\"OrderComposition_burgerName__ZA6Ja\",\"burgerStatus\":\"OrderComposition_burgerStatus__2ykDZ\",\"list\":\"OrderComposition_list__uDT4l\",\"row\":\"OrderComposition_row__4IK3k\",\"image\":\"OrderComposition_image___nfji\",\"ingredientName\":\"OrderComposition_ingredientName__x4Zcq\",\"footer\":\"OrderComposition_footer__Sf4P5\",\"price\":\"OrderComposition_price__1swd9\"};","import React, { useEffect } from 'react';\nimport stylesAppHeader from './AppHeader.module.css';\nimport {\n  BurgerIcon,\n  ListIcon,\n  ProfileIcon,\n  Logo,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, useRouteMatch } from 'react-router-dom';\n\nfunction AppHeader() {\n  const [activeNav, setActiveNav] = React.useState('designer');\n  const { path } = useRouteMatch();\n  useEffect(() => {\n    switch (path) {\n      case '/feed':\n        setActiveNav('feed');\n        break;\n      case '/profile':\n        setActiveNav('profile');\n        break;\n      case '/':\n        setActiveNav('designer');\n        break;\n      default:\n        setActiveNav('designer');\n    }\n  }, [path]);\n\n  return (\n    <div className={stylesAppHeader.header}>\n      <nav className={stylesAppHeader.navigate}>\n        <div className={stylesAppHeader.burgers}>\n          <Link\n            to=\"/\"\n            className={\n              (activeNav === 'designer'\n                ? stylesAppHeader.menuItemActive\n                : stylesAppHeader.menuItem) +\n              ' text text_type_main-default pl-5 pr-5 pb-4 pt-4 mr-2'\n            }\n          >\n            <BurgerIcon\n              type={activeNav === 'designer' ? 'primary' : 'secondary'}\n            />\n            <p className=\"ml-2\">Конструктор</p>\n          </Link>\n          <Link\n            to=\"/feed\"\n            className={\n              (activeNav === 'feed'\n                ? stylesAppHeader.menuItemActive\n                : stylesAppHeader.menuItem) +\n              ' text text_type_main-default pl-5 pr-5 pb-4 pt-4 mr-2'\n            }\n          >\n            <ListIcon type={activeNav === 'feed' ? 'primary' : 'secondary'} />\n            <p className=\"ml-2\">Лента заказов</p>\n          </Link>\n        </div>\n        <div className={stylesAppHeader.logo}>\n          <Link to=\"/\">\n            <Logo />\n          </Link>\n        </div>\n        <div\n          className={\n            (activeNav === 'profile'\n              ? stylesAppHeader.menuItemActive\n              : stylesAppHeader.menuItem) +\n            ' text text_type_main-default pl-5 pr-5 pb-4 pt-4 mr-2 ' +\n            stylesAppHeader.menuItemLs\n          }\n        >\n          <Link\n            to=\"/profile\"\n            className={\n              (activeNav === 'profile'\n                ? stylesAppHeader.menuItemActive\n                : stylesAppHeader.menuItem) + ' text text_type_main-default '\n            }\n          >\n            <ProfileIcon\n              type={activeNav === 'profile' ? 'primary' : 'secondary'}\n            />\n            <p className=\"ml-2\">Личный кабинет</p>\n          </Link>\n        </div>\n      </nav>\n    </div>\n  );\n}\n\nexport default AppHeader;\n","export default __webpack_public_path__ + \"static/media/done.85c3a14d.svg\";","import {\n  TypedUseSelectorHook,\n  useDispatch as dispatchHook,\n  useSelector as selectorHook\n} from 'react-redux';\nimport { AppDispatch, AppThunk, RootState } from './types';\n\n// Теперь этот хук «знает» структуру хранилища\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\n\n// Хук не даст отправить экшен, который ему не знаком\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>(); \n","import React from 'react';\nimport styles from './Preloader.module.css';\n\nfunction Preloader() {\n  return (\n    <>\n      <div className={styles.spinner}>\n        <div className={styles.dot}></div>\n        <div className={styles.dot}></div>\n        <div className={styles.dot}></div>\n        <div className={styles.dot}></div>\n        <div className={styles.dot}></div>\n        <div className={styles.dot}></div>\n        <div className={styles.dot}></div>\n      </div>\n      <svg>\n        <defs>\n          <filter id=\"goo\">\n            <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"8\" result=\"blur\" />\n            <feColorMatrix\n              in=\"blur\"\n              mode=\"matrix\"\n              values=\"\n                1 0 0 0 0 \n                0 1 0 0 0\n                0 0 1 0 0\n                0 0 0 25 -8\"\n              result=\"goo\"\n            />\n            <feBlend in=\"SourceGraphic\" in2=\"goo\" />\n          </filter>\n        </defs>\n      </svg>\n    </>\n  );\n}\n\nexport default Preloader;\n","import React from 'react';\nimport stylesOrderDetails from './OrderDetails.module.css';\nimport imageDone from '../../images/done.svg';\nimport { useSelector } from '../../utils/hooks';\nimport Preloader from '../../pages/Preloader/Preloader';\nfunction OrderDetails() {\n  const order = useSelector((store) => store.burgerReducer.order);\n\n  return (\n    <div className={stylesOrderDetails.bigCard}>\n      {order ? (\n        <p\n          className={stylesOrderDetails.order + ' text text_type_digits-large'}\n        >\n          {order}\n        </p>\n      ) : (\n        <p\n          className={stylesOrderDetails.order + ' text text_type_digits-large'}\n        >\n          - - - - -\n        </p>\n      )}\n      <p className=\"text text_type_main-medium mt-8\">идентификатор заказа</p>\n      {order ? (\n        <img\n          src={imageDone}\n          alt=\"Успешно\"\n          className={stylesOrderDetails.done + ' mt-15'}\n        />\n      ) : (\n        <Preloader />\n      )}\n      <p className=\"text text_type_main-default mt-15\">\n        Ваш заказ начали готовить\n      </p>\n      <p\n        className={\n          stylesOrderDetails.stationText +\n          ' text text_type_main-default mt-2 mb-30'\n        }\n      >\n        Дождитесь готовности на орбитальной станции\n      </p>\n    </div>\n  );\n}\n\nexport default OrderDetails;\n","const wsApiOrderURL = 'wss://norma.nomoreparties.space/orders/all';\nconst wsUserApiOrderURL = 'wss://norma.nomoreparties.space/orders';\nconst BASE_URL = 'https://norma.nomoreparties.space/api';\nexport { wsApiOrderURL, BASE_URL, wsUserApiOrderURL };\n","export const LOAD_INGREDIENTS: 'LOAD_INGREDIENTS' = 'LOAD_INGREDIENTS';\nexport const LOAD_CONSTRUCTOR: 'LOAD_CONSTRUCTOR' = 'LOAD_CONSTRUCTOR';\nexport const LOAD_DETAILS: 'LOAD_DETAILS' = 'LOAD_DETAILS';\nexport const DELETE_DETAILS: 'DELETE_DETAILS' = 'DELETE_DETAILS';\nexport const ORDER_NUMBER: 'ORDER_NUMBER' = 'ORDER_NUMBER';\nexport const ADD_INGREDIENT: 'ADD_INGREDIENT' = 'ADD_INGREDIENT';\nexport const DELETE_INGREDIENT: 'DELETE_INGREDIENT' = 'DELETE_INGREDIENT';\nexport const CHANGE_INGREDIENT: 'CHANGE_INGREDIENT' = 'CHANGE_INGREDIENT';\nexport const ORDER_CLEAR: 'ORDER_CLEAR' = 'ORDER_CLEAR';\n\nexport const LOGIN_USER: 'LOGIN_USER' = 'LOGIN_USER';\nexport const REGISTER_USER: 'REGISTER_USER' = 'REGISTER_USER';\nexport const LOGOUT_USER: 'LOGOUT_USER' = 'LOGOUT_USER';\nexport const CHEK_TOKEN: 'CHEK_TOKEN' = 'CHEK_TOKEN';\n\nexport const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\nexport const WS_CONNECTION_CLOSE: 'WS_CONNECTION_CLOSE' = 'WS_CONNECTION_CLOSE';\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS'; \nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\n","import { BASE_URL } from '../../utils/const';\nimport { LOGIN_USER, REGISTER_USER, LOGOUT_USER, CHEK_TOKEN } from './index';\nimport { TUserData } from '../../utils/types';\nimport { AppDispatch } from '../../utils/types';\n\nexport interface ILoginUserAction {\n  readonly type: typeof LOGIN_USER;\n  readonly data: TUserData;\n}\nexport interface IRegisterUserAction {\n  readonly type: typeof REGISTER_USER;\n  readonly data: TUserData;\n}\nexport interface ILogoutUserAction {\n  readonly type: typeof LOGOUT_USER;\n}\nexport interface IChekTokenAction {\n  readonly type: typeof CHEK_TOKEN;\n  readonly data: TUserData;\n}\n\nexport type TAuthActions =\n  | ILoginUserAction\n  | IRegisterUserAction\n  | ILogoutUserAction\n  | IChekTokenAction;\n\nexport function login(data: TUserData) {\n  return function (dispatch: AppDispatch) {\n    fetch(`${BASE_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n      },\n      body: JSON.stringify({\n        email: data.email,\n        password: data.password,\n      }),\n    })\n      .then(checkReponse)\n      .then((answer) => {\n        if (answer.success) {\n          setCookie('accessToken', answer.accessToken);\n          localStorage.setItem('refreshToken', answer.refreshToken);\n          dispatch({\n            type: LOGIN_USER,\n            data: answer.user,\n          });\n        } else {\n          return Promise.reject(`Ошибка данных`);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n}\nexport function register(data: TUserData) {\n  return function (dispatch: AppDispatch) {\n    fetch(`${BASE_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n      },\n      body: JSON.stringify({\n        email: data.email,\n        password: data.password,\n        name: data.name,\n      }),\n    })\n      .then(checkReponse)\n      .then((answer) => {\n        if (answer.success) {\n          setCookie('accessToken', answer.accessToken);\n          localStorage.setItem('refreshToken', answer.refreshToken);\n          dispatch({\n            type: REGISTER_USER,\n            data: answer.user,\n          });\n        } else {\n          return Promise.reject(`Ошибка данных`);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n}\n\nexport function logout() {\n  return function (dispatch: AppDispatch) {\n    fetch(`${BASE_URL}/auth/logout`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n      },\n      body: JSON.stringify({\n        token: localStorage.getItem('refreshToken'),\n      }),\n    })\n      .then(checkReponse)\n      .then((answer) => {\n        if (answer.success) {\n          deleteCookie('accessToken');\n          localStorage.removeItem('refreshToken');\n          dispatch({\n            type: LOGOUT_USER,\n          });\n        } else {\n          return Promise.reject(`Ошибка данных`);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n}\nexport function getUser() {\n  return function (dispatch: AppDispatch) {\n    return fetchWithRefresh(`${BASE_URL}/auth/user`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n        authorization: getCookie('accessToken'),\n      },\n    })\n      .then((answer) => {\n        if (answer.success) {\n          dispatch({\n            type: CHEK_TOKEN,\n            data: answer.user,\n          });\n        } else {\n          return Promise.reject(`Ошибка данных`);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n}\nexport function patchUser(data: TUserData) {\n  return function (dispatch: AppDispatch) {\n    fetchWithRefresh(`${BASE_URL}/auth/user`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n        authorization: getCookie('accessToken'),\n      },\n      body: JSON.stringify({\n        name: data.name,\n        email: data.email,\n        password: data.password,\n      }),\n    })\n      .then((answer) => {\n        if (answer.success) {\n          dispatch({\n            type: CHEK_TOKEN,\n            data: answer.user,\n          });\n        } else {\n          return Promise.reject(`Ошибка данных`);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n}\n\nconst checkReponse = (res: Response) => {\n  return res.ok ? res.json() : res.json().then((err) => Promise.reject(err));\n};\n\nexport const refreshToken = () => {\n  return fetch(`${BASE_URL}/auth/token`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8',\n    },\n    body: JSON.stringify({\n      token: localStorage.getItem('refreshToken'),\n    }),\n  }).then(checkReponse);\n};\n\ntype Overwrite<T, U> = Pick<T, Exclude<keyof T, keyof U>> & U;\ntype MyRequestInit = Overwrite<RequestInit, {headers: Record<string, string>  }>;\n\nexport const fetchWithRefresh = async (url: string, options: MyRequestInit) => {\n  try {\n    const res = await fetch(url, options);\n    return await checkReponse(res);\n  } catch (err: any) {\n    if (err.message === 'jwt expired') {\n      const refreshData = await refreshToken(); //обновляем токен\n      localStorage.setItem('refreshToken', refreshData.refreshToken);\n      setCookie('accessToken', refreshData.accessToken);\n      options.headers.authorization = refreshData.accessToken;\n      const res = await fetch(url, options); //повторяем запрос\n      return await checkReponse(res);\n    } else {\n      return Promise.reject(err);\n    }\n  }\n};\n\nexport function setCookie(name: string, value: string, props: any = {}) {\n  props = props || {};\n  props = {\n    path: '/',\n    expires: 35900,\n    ...props,\n  };\n  let exp = props.expires;\n  if (typeof exp == 'number' && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && exp.toUTCString) {\n    props.expires = exp.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n}\n\nexport function getCookie(name: string) {\n  const matches = document.cookie.match(\n    new RegExp(\n      '(?:^|; )' +\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') +\n        '=([^;]*)'\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : '';\n}\nfunction deleteCookie(name: string) {\n  setCookie(name, '', {\n    'max-age': -1,\n  });\n}\n","import React, { FunctionComponent, useRef } from 'react';\nimport stylesConstructorIngredient from './ConstructorIngredient.module.css';\nimport {\n  ConstructorElement,\n  DragIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useDrop, useDrag } from 'react-dnd';\n\nimport { useDispatch } from '../../utils/hooks';\nimport { DELETE_INGREDIENT } from '../../services/actions';\nimport { TItem } from '../../utils/types';\n\ninterface IConstructorIngredientProps {\n  item: TItem;\n  index: number;\n  moveElement: (dragIndex: number, hoverIndex: number) => void;\n}\n\nconst ConstructorIngredient: FunctionComponent<IConstructorIngredientProps> = ({\n  item,\n  index,\n  moveElement,\n}) => {\n  const ref = useRef<HTMLInputElement>(null);\n  const dispatch = useDispatch();\n\n  const [{ isDragging }, dragRef] = useDrag({\n    type: 'constructorElement',\n    item: () => {\n      return { item, index };\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [, dropRef] = useDrop({\n    accept: 'constructorElement',\n    hover: (item: TItem, monitor) => {\n      if (!item.index || item.index === index) {\n        return;\n      }\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n      if (!hoverBoundingRect) return;\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset) return;\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n      if (item.index < index && hoverClientY < hoverMiddleY) {\n        return;\n      }\n      if (item.index > index && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      moveElement(item.index, index);\n      item.index = index;\n    },\n  });\n\n  function deleteElement(item: TItem) {\n    dispatch({\n      type: DELETE_INGREDIENT,\n      item: item,\n      qnt: 1,\n    });\n  }\n  const opacity = isDragging ? 0 : 1;\n\n  dragRef(dropRef(ref));\n\n  return (\n    <div\n      ref={ref}\n      className={stylesConstructorIngredient.burgerItem}\n      style={{ opacity }}\n      key={item.constId}\n    >\n      <DragIcon type=\"primary\" />\n      <ConstructorElement\n        handleClose={() => deleteElement(item)}\n        text={item.name}\n        price={item.price}\n        thumbnail={item.image_mobile}\n      />\n    </div>\n  );\n};\n\nexport default ConstructorIngredient;\n","import React, { FunctionComponent, ReactNode, useReducer } from 'react';\nimport stylesBurgerConstructor from './BurgerConstructor.module.css';\nimport { useHistory } from 'react-router-dom';\nimport {\n  CurrencyIcon,\n  ConstructorElement,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport OrderDetails from '../OrderDetails/OrderDetails';\nimport { useSelector, useDispatch } from '../../utils/hooks';\nimport { postOrder } from '../../services/actions/burgerActions';\nimport { useDrop } from 'react-dnd';\nimport {\n  ADD_INGREDIENT,\n  CHANGE_INGREDIENT,\n  DELETE_INGREDIENT,\n} from '../../services/actions';\nimport ConstructorIngredient from '../ConstructorIngredient/ConstructorIngredient';\nimport { TItem } from '../../utils/types';\nconst initialState = { total: 0 };\n\ninterface IBurgerConstructorProps {\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n}\n\nconst BurgerConstructor: FunctionComponent<IBurgerConstructorProps> = ({\n  onModalOpen,\n}) => {\n  const dispatch = useDispatch();\n  const data = useSelector((store) => store.burgerReducer.constructor);\n  const constId = Date.now();\n  const auth = useSelector((store) => store.authReducer.isAuthorized);\n  const history = useHistory();\n\n  const [, dropTarget] = useDrop({\n    accept: 'ingredient',\n    drop(item: TItem) {\n      onDropHandler(item);\n    },\n  });\n\n  const onDropHandler = (item: TItem) => {\n    let qnt = 1;\n    if (item.type === 'bun') {\n      qnt = 2;\n      const bunElement = data.find((el: TItem) => el.type === 'bun');\n      if (bunElement) {\n        dispatch({\n          type: DELETE_INGREDIENT,\n          item: bunElement,\n          qnt: qnt,\n        });\n      }\n    }\n    dispatch({\n      type: ADD_INGREDIENT,\n      item: item,\n      id: constId,\n      qnt: qnt,\n    });\n  };\n  const burgerBun = data.find((item: TItem) => item.type === 'bun');\n\n  const [stateTotal, dispatchTotal] = useReducer(reducer, initialState);\n\n  function reducer() {\n    const total = data.reduce(\n      (sum: number, item: TItem) =>\n        sum + (item.type === 'bun' ? item.price * 2 : item.price),\n      0\n    );\n    return { total: total };\n  }\n  function onClick() {\n    if (burgerBun) {\n      if (auth) {\n        dispatch(postOrder(data));\n        const modalChild = <OrderDetails />;\n        const modalHeader = '';\n        onModalOpen(modalChild, modalHeader);\n      } else {\n        history.replace({ pathname: '/login' });\n      }\n    }\n  }\n  function moveElement(dragIndex: number, hoverIndex: number) {\n    dispatch({\n      type: CHANGE_INGREDIENT,\n      dragIndex: dragIndex,\n      hoverIndex: hoverIndex,\n    });\n  }\n  React.useEffect(() => {\n    dispatchTotal();\n  }, [data]);\n  const inactiveButtonStyle = burgerBun\n    ? {}\n    : { opacity: 0.5, cursor: 'default' };\n  return (\n    <div ref={dropTarget} className=\"mt-25 ml-4\">\n      {burgerBun && (\n        <ConstructorElement\n          type=\"top\"\n          isLocked={true}\n          text={burgerBun.name + ' (верх)'}\n          price={burgerBun.price}\n          thumbnail={burgerBun.image_mobile}\n        />\n      )}\n      <div className={stylesBurgerConstructor.list + ' mt-4 mb-4 pr-4'}>\n        {data.map(\n          (el: TItem, index: number) =>\n            el.type !== 'bun' && (\n              <ConstructorIngredient\n                item={el}\n                index={index}\n                key={el.constId}\n                moveElement={moveElement}\n              />\n            )\n        )}\n      </div>\n\n      {burgerBun && (\n        <ConstructorElement\n          type=\"bottom\"\n          isLocked={true}\n          text={burgerBun.name + ' (низ)'}\n          price={burgerBun.price}\n          thumbnail={burgerBun.image_mobile}\n        />\n      )}\n      <div className={stylesBurgerConstructor.footer + '  mt-10'}>\n        <div className=\"mr-10\">\n          <p\n            className={\n              stylesBurgerConstructor.total + ' text text_type_digits-medium'\n            }\n          >\n            {stateTotal.total}\n          </p>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <div style={inactiveButtonStyle}>\n          <Button type=\"primary\" size=\"medium\" onClick={onClick}>\n            Оформить заказ\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BurgerConstructor;\n","import { BASE_URL } from '../../utils/const';\nimport {\n  LOAD_INGREDIENTS,\n  LOAD_DETAILS,\n  DELETE_DETAILS,\n  ORDER_NUMBER,\n  ADD_INGREDIENT,\n  DELETE_INGREDIENT,\n  CHANGE_INGREDIENT,\n  ORDER_CLEAR,\n\n } from './index';\nimport { TItem } from '../../utils/types';\nimport { AppDispatch } from '../../utils/types';\nimport { getCookie } from './authActions';\nexport interface ILoadDetailsAction {\n  readonly type: typeof LOAD_DETAILS;\n  readonly item: TItem;\n}\nexport interface IDeleteDetailsAction {\n  readonly type: typeof DELETE_DETAILS;\n}\nexport interface IAddIngredientAction {\n  readonly type: typeof ADD_INGREDIENT;\n  readonly item: TItem,\n  readonly id: number,\n  readonly qnt: number,\n\n}\nexport interface IDeleteIngredientAction {\n  readonly type: typeof DELETE_INGREDIENT;\n  readonly item: TItem,\n  readonly qnt: number,\n}\nexport interface IChangeingredientAction {\n  readonly type: typeof CHANGE_INGREDIENT;\n  readonly dragIndex: number,\n  readonly hoverIndex: number,\n}\nexport interface IGetDataAction {\n  readonly type: typeof LOAD_INGREDIENTS;\n  readonly data: Array<TItem>;\n}\nexport interface IPostOrderAction {\n  readonly type: typeof ORDER_NUMBER;\n  readonly number: number;\n}\nexport interface IOrderClearAction {\n  readonly type: typeof ORDER_CLEAR;\n}\n\nexport type TBurgerActions =\n  | IChangeingredientAction\n  | IDeleteIngredientAction\n  | IAddIngredientAction\n  | IDeleteDetailsAction\n  | ILoadDetailsAction\n  | IGetDataAction\n  | IPostOrderAction\n  | IOrderClearAction;\n\n\nexport function getData() {\n  return function (dispatch: AppDispatch) {\n    fetch(BASE_URL+'/ingredients')\n      .then((answer) => {\n        if (answer.ok) {\n          return answer.json();\n        }\n        return Promise.reject(`Ошибка ${answer.status}`);\n      })\n      .then((answer) => {\n        if (answer.success) {\n          dispatch({\n            type: LOAD_INGREDIENTS,\n            data: answer.data,\n          });\n        } else {\n          return Promise.reject(`Ошибка данных`);\n        }\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n  };\n}\n\nexport function postOrder(data: Array<TItem>) {\n  return async function (dispatch: AppDispatch) {\n    const orderArray = data.map((item) => item._id);\n    const response = await fetch(BASE_URL + '/orders', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n        authorization: getCookie('accessToken'),\n      },\n      body: JSON.stringify({\n        ingredients: orderArray,\n      }),\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка ${res.status}`);\n      })\n      .then((res) => {\n        if (res.success) {\n          dispatch({\n            type: ORDER_NUMBER,\n            number: res.order.number,\n          });\n          dispatch({\n            type: ORDER_CLEAR,\n          });\n        } else {\n          return Promise.reject(`Ошибка данных`);\n        }\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n    return response;\n  };\n}\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport {\n  CurrencyIcon,\n  Counter,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport stylesIngredient from './Ingredient.module.css';\nimport { useDrag } from 'react-dnd';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { TItem } from '../../utils/types';\n\ninterface IIngredientProps {\n  item: TItem;\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n}\n\nconst Ingredient: FunctionComponent<IIngredientProps> = ({\n  item,\n  onModalOpen,\n}) => {\n  const history = useHistory();\n  let location = useLocation();\n  function onClick() {\n    history.push({\n      pathname: `/ingredients/${item._id}`,\n      state: { background: location },\n    });\n  }\n  const [, dragRef] = useDrag({\n    type: 'ingredient',\n    item: item,\n  });\n  return (\n    <div ref={dragRef} className={stylesIngredient.card} onClick={onClick}>\n      <img src={item.image} alt=\"Продукт\" />\n      <div className={stylesIngredient.price + ' mt-1'}>\n        <p className=\"text text_type_digits-default\">{item.price}</p>\n        <CurrencyIcon type=\"primary\" />\n      </div>\n      <p className=\"text text_type_main-default mt-1\">{item.name}</p>\n      <div className={stylesIngredient.counter}>\n        {item.count > 0 && <Counter count={item.count} size=\"default\" />}\n      </div>\n    </div>\n  );\n};\n\nexport default Ingredient;\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport stylesBurgerIngredients from './BurgerIngredients.module.css';\nimport Ingredient from '../Ingredient/Ingredient';\nimport { useSelector } from '../../utils/hooks';\nimport { TItem } from '../../utils/types';\n\ninterface IBurgerIngredientsProps {\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n}\n\nconst BurgerIngredients: FunctionComponent<IBurgerIngredientsProps> = ({\n  onModalOpen,\n}) => {\n  const data = useSelector((store) => store.burgerReducer.ingredients);\n  const [current, setCurrent] = React.useState('bun');\n  const bunArray = data.filter((item: TItem) => item.type === 'bun');\n  const mainArray = data.filter((item: TItem) => item.type === 'main');\n  const sauceArray = data.filter((item: TItem) => item.type === 'sauce');\n\n  const ingredientsWindow = document.querySelector('#ingredients');\n  const bunElement = document.querySelector('#bun');\n  const sauceElement = document.querySelector('#sauce');\n  const mainElement = document.querySelector('#main');\n\n  const scrollListener = () => {\n    // Посчитаем расстояние до каждого раздела\n    if (!ingredientsWindow || !bunElement || !sauceElement || !mainElement) {\n      setCurrent('bun');\n      return;\n    }\n    const bunLength = Math.abs(\n      ingredientsWindow.getBoundingClientRect().top -\n        bunElement.getBoundingClientRect().top\n    );\n    const sauceLength = Math.abs(\n      ingredientsWindow.getBoundingClientRect().top -\n        sauceElement.getBoundingClientRect().top\n    );\n    const mainLength = Math.abs(\n      ingredientsWindow.getBoundingClientRect().top -\n        mainElement.getBoundingClientRect().top\n    );\n    const rightTabLength = Math.min(bunLength, sauceLength, mainLength);\n    setCurrent(\n      bunLength === rightTabLength\n        ? 'bun'\n        : sauceLength === rightTabLength\n        ? 'sauce'\n        : 'main'\n    );\n  };\n  return (\n    <section className={stylesBurgerIngredients.section}>\n      <div className={stylesBurgerIngredients.tab}>\n        <Tab value=\"bun\" active={current === 'bun'} onClick={setCurrent}>\n          Булки\n        </Tab>\n        <Tab value=\"sauce\" active={current === 'sauce'} onClick={setCurrent}>\n          Соусы\n        </Tab>\n        <Tab value=\"main\" active={current === 'main'} onClick={setCurrent}>\n          Начинки\n        </Tab>\n      </div>\n      <div\n        id=\"ingredients\"\n        onScroll={scrollListener}\n        className={stylesBurgerIngredients.ingredients}\n      >\n        <p\n          id=\"bun\"\n          className={\n            stylesBurgerIngredients.chapterLabel +\n            ' mt-10 text text_type_main-medium'\n          }\n        >\n          Булки\n        </p>\n        <div className={stylesBurgerIngredients.chapter + ' mt-6 ml-4'}>\n          {bunArray.map((item: TItem) => (\n            <Ingredient item={item} key={item._id} onModalOpen={onModalOpen} />\n          ))}\n        </div>\n        <p\n          id=\"sauce\"\n          className={\n            stylesBurgerIngredients.chapterLabel +\n            ' mt-10 text text_type_main-medium'\n          }\n        >\n          Соусы\n        </p>\n        <div className={stylesBurgerIngredients.chapter + ' mt-6 ml-4'}>\n          {sauceArray.map((item: TItem) => (\n            <Ingredient item={item} key={item._id} onModalOpen={onModalOpen} />\n          ))}\n        </div>\n        <p\n          id=\"main\"\n          className={\n            stylesBurgerIngredients.chapterLabel +\n            ' mt-10 text text_type_main-medium'\n          }\n        >\n          Начинки\n        </p>\n        <div className={`${stylesBurgerIngredients.chapter} mt-6 ml-4`}>\n          {mainArray.map((item: TItem) => (\n            <Ingredient item={item} key={item._id} onModalOpen={onModalOpen} />\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default BurgerIngredients;\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport BurgerConstructor from '../BurgerConstructor/BurgerConstructor';\nimport BurgerIngredients from '../BurgerIngredients/BurgerIngredients';\nimport stylesMain from './Main.module.css';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\ninterface IMainProps {\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n}\n\nconst Main: FunctionComponent<IMainProps> = ({ onModalOpen }) => {\n  return (\n    <div className={stylesMain.main}>\n      <DndProvider backend={HTML5Backend}>\n        <div className=\"mr-10\">\n          <h1\n            className={`${stylesMain.label} text text_type_main-large mt-10 mb-5`}\n          >\n            Соберите бургер\n          </h1>\n          <BurgerIngredients onModalOpen={onModalOpen} />\n        </div>\n        <BurgerConstructor onModalOpen={onModalOpen} />\n      </DndProvider>\n    </div>\n  );\n};\n\nexport default Main;\n","import React, { FunctionComponent } from 'react';\nimport stylesModalOverlay from './ModalOverlay.module.css';\n\ninterface IModalOverlayProps {\n  onClick: () => void;\n}\n\nconst ModalOverlay: FunctionComponent<IModalOverlayProps> = ({ onClick }) => {\n  return <div className={stylesModalOverlay.overlay} onClick={onClick}></div>;\n};\n\nexport default ModalOverlay;\n","import React, { FunctionComponent, ReactNode, useCallback } from 'react';\nimport ReactDOM from 'react-dom';\nimport stylesModal from './Modal.module.css';\nimport ModalOverlay from '../ModalOverlay/ModalOverlay';\n\nconst modalRoot = document.getElementById('react-modals');\n\ninterface IModalProps {\n  children: ReactNode | '';\n  onClose: () => void;\n  header?: string;\n}\n\nconst Modal: FunctionComponent<IModalProps> = ({\n  children,\n  onClose,\n  header = '',\n}) => {\n  function onOverlayClick() {\n    onClose();\n  }\n\n  const onPressEsc = useCallback(\n    (evt: KeyboardEvent) => {\n      if (evt.key === 'Escape') {\n        evt.preventDefault();\n        onClose();\n      }\n    },\n    [onClose]\n  );\n\n  React.useEffect(() => {\n    document.addEventListener('keydown', onPressEsc);\n    return () => {\n      document.removeEventListener('keydown', onPressEsc);\n    };\n  }, [onPressEsc]);\n\n  if (!modalRoot) {\n    return null;\n  }\n\n  return ReactDOM.createPortal(\n    <>\n      <ModalOverlay onClick={onOverlayClick} />\n      <div className={stylesModal.modal}>\n        <div className={stylesModal.header + ' mt-10 mr-10 ml-10'}>\n          <h1 className={stylesModal.label + ' text text_type_main-large'}>\n            {header}\n          </h1>\n          <button className={stylesModal.buttonClose} onClick={onClose} />\n        </div>\n        <div className={stylesModal.children}>{children}</div>\n      </div>\n    </>,\n    modalRoot\n  );\n};\n\nexport default Modal;\n","import React from 'react';\n\nfunction Page404() {\n  return (\n    <div>\n      <p className=\"text text_type_digits-large mt-20\">404</p>\n      <p className=\"text text_type_main-large mt-10\">Страницы не существует</p>\n      <p className=\"text text_type_main-default mt-25\">\n        Возможно вы попали сюда по ошибке, а может быть эту страницу уничтожил\n        пролетающий мимо метеорит.\n      </p>\n    </div>\n  );\n}\n\nexport default Page404;\n","import React, { useState, useCallback } from 'react';\nimport {\n  PasswordInput,\n  Button,\n  EmailInput,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { login } from '../../services/actions/authActions';\nimport stylesLogin from './Login.module.css';\nimport stylesGlobal from '../../utils/global.module.css';\nimport { useSelector, useDispatch } from '../../utils/hooks';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\n// import { LOGIN_USER } from '../../services/actions';\n\ntype TLocationState = {\n  background: Location;\n  from: Location;\n};\n\nfunction Login() {\n  const [form, setValue] = useState({ email: '', password: '' });\n  const dispatch = useDispatch();\n  const auth = useSelector((store) => store.authReducer.isAuthorized);\n  let location = useLocation<TLocationState>();\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const loginListener = useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch(login(form));\n    },\n    [form, dispatch]\n  );\n\n  if (auth) {\n    return (\n      <Redirect\n        // Если объект state не является undefined, вернём пользователя назад.\n        to={location.state?.from || '/'}\n      />\n    );\n  }\n\n  return (\n    <div className={stylesLogin.main}>\n      <form onSubmit={loginListener} className={stylesLogin.form + ' mb-20'}>\n        <h1 className={stylesLogin.heading + ' text text_type_main-large mb-6'}>\n          Вход\n        </h1>\n        <div className={'mb-6'}>\n          <EmailInput value={form.email} name={'email'} onChange={onChange} />\n        </div>\n        <div className={'mb-6'}>\n          <PasswordInput\n            value={form.password}\n            name=\"password\"\n            onChange={onChange}\n          />\n        </div>\n        <Button type=\"primary\">Войти</Button>\n      </form>\n      <div className={stylesLogin.footerLine}>\n        <p className={'text text_type_main-default text_color_inactive'}>\n          Вы — новый пользователь?\n        </p>\n        <Link\n          to=\"/register\"\n          className={stylesGlobal.link + ' text text_type_main-default ml-2'}\n        >\n          Зарегистрироваться\n        </Link>\n      </div>\n      <div className={stylesLogin.footerLine + ' mt-4'}>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Забыли пароль?\n        </p>\n        <Link\n          to=\"/forgot-password\"\n          className={stylesGlobal.link + ' text text_type_main-default ml-2'}\n        >\n          Восстановить пароль\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n","import React, {\n  useState,\n  useCallback,\n  useEffect,\n  FunctionComponent,\n} from 'react';\nimport {\n  Input,\n  PasswordInput,\n  Button,\n  EmailInput,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport stylesRegister from './Register.module.css';\nimport stylesGlobal from '../../utils/global.module.css';\nimport { Link, useHistory, Redirect } from 'react-router-dom';\nimport { register } from '../../services/actions/authActions';\nimport { useSelector, useDispatch } from '../../utils/hooks';\n\ninterface IRegisterProps {\n  state?: {\n    from: Location;\n  };\n}\n\nconst Register: FunctionComponent<IRegisterProps> = (props) => {\n  const history = useHistory();\n  const [form, setValue] = useState({ name: '', email: '', password: '' });\n  const dispatch = useDispatch();\n  const auth = useSelector((store) => store.authReducer.isAuthorized);\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const registerListener = useCallback(\n    (e) => {\n      e.preventDefault();\n      dispatch(register(form));\n    },\n    [form, dispatch]\n  );\n  useEffect(() => {\n    if (auth) {\n      history.replace({ pathname: '/' });\n    }\n  }, [history, auth]);\n\n  if (auth) {\n    return (\n      <Redirect\n        // Если объект state не является undefined, вернём пользователя назад.\n        to={props.state?.from || '/'}\n      />\n    );\n  }\n\n  return (\n    <div className={stylesRegister.main}>\n      <form\n        onSubmit={registerListener}\n        className={stylesRegister.form + ' mb-20'}\n      >\n        <h1\n          className={stylesRegister.heading + ' text text_type_main-large mb-6'}\n        >\n          Регистрация\n        </h1>\n        <div className={'mb-6'}>\n          <Input\n            placeholder=\"Имя\"\n            value={form.name}\n            name=\"name\"\n            onChange={onChange}\n          />\n        </div>\n        <div className={'mb-6'}>\n          <EmailInput value={form.email} name=\"email\" onChange={onChange} />\n        </div>\n        <div className={'mb-6'}>\n          <PasswordInput\n            value={form.password}\n            name=\"password\"\n            onChange={onChange}\n          />\n        </div>\n        <Button type=\"primary\">Зарегистрироваться</Button>\n      </form>\n      <div className={stylesRegister.footerLine}>\n        <p className={'text text_type_main-default text_color_inactive'}>\n          Уже зарегистрированы?\n        </p>\n        <Link\n          to=\"/login\"\n          className={stylesGlobal.link + ' text text_type_main-default ml-2'}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","import React, { useState, useCallback } from 'react';\nimport {\n  Button,\n  EmailInput,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport stylesForgotPassword from './ForgotPassword.module.css';\nimport stylesGlobal from '../../utils/global.module.css';\nimport { Link } from 'react-router-dom';\nimport { useHistory, Redirect } from 'react-router-dom';\nimport { forgotPassword } from '../../utils/auth';\nimport { useSelector } from '../../utils/hooks';\n\nfunction ForgotPassword() {\n  const [form, setValue] = useState({ email: '' });\n  const history = useHistory();\n  const auth = useSelector((store) => store.authReducer.isAuthorized);\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const passwordReset = useCallback(\n    (e) => {\n      e.preventDefault();\n      forgotPassword(form.email)\n        .then((data) => {\n          if (data.success) {\n            history.replace({ pathname: '/reset-password' });\n          }\n        })\n        .catch((err) => {\n          console.log(err.message);\n        });\n    },\n    [form, history]\n  );\n  if (auth) {\n    return <Redirect to={'/'} />;\n  }\n\n  return (\n    <div className={stylesForgotPassword.main}>\n      <form\n        className={stylesForgotPassword.form + ' mb-20'}\n        onSubmit={passwordReset}\n      >\n        <h1\n          className={\n            stylesForgotPassword.heading + ' text text_type_main-large mb-6'\n          }\n        >\n          Восстановление пароля\n        </h1>\n        <div className={'mb-6'}>\n          <EmailInput value={form.email} name=\"email\" onChange={onChange} />\n        </div>\n        <Button type=\"primary\">Восстановить</Button>\n      </form>\n      <div className={stylesForgotPassword.footerLine}>\n        <p className={'text text_type_main-default text_color_inactive'}>\n          Вспомнили пароль?\n        </p>\n        <Link\n          to=\"/login\"\n          className={stylesGlobal.link + ' text text_type_main-default ml-2'}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default ForgotPassword;\n","import { BASE_URL } from \"./const\";\n\nexport const autorize = (password: string, email: string) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      password: password,\n      email: email,\n    }),\n  }).then((response) => {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  });\n};\n\nexport const forgotPassword = (email: string) => {\n  return fetch(`${BASE_URL}/password-reset`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email: email,\n    }),\n  }).then((response) => {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  });\n};\n\nexport const resetPassword = (password: string, code: string) => {\n  return fetch(`${BASE_URL}/password-reset/reset`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      password: password,\n      token: code,\n    }),\n  }).then((response) => {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  });\n};\n\nexport const chekToken = (token: string) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  }).then((response) => {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  });\n};\n\n\nexport const getOrder = (number: number) => {\n  return fetch(`${BASE_URL}/orders/${number}`, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n  }).then((response) => {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  });\n};\n","import React, { useState, useCallback } from 'react';\nimport {\n  Input,\n  PasswordInput,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport stylesResetPassword from './ResetPassword.module.css';\nimport stylesGlobal from '../../utils/global.module.css';\nimport { Link } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport { resetPassword } from '../../utils/auth';\n\nfunction ResetPassword() {\n  const [form, setValue] = useState({ code: '', password: '' });\n  const history = useHistory();\n  let permission = false;\n  if (history.action === 'PUSH' || history.action === 'REPLACE') {\n    if (history.location.pathname === '/reset-password') {\n      // Все отлично, можно открывать страницу, пользователь\n      // пришел с правильной страницы\n      permission = true;\n    }\n  }\n  if (!permission) {\n    history.replace({ pathname: '/' });\n  }\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const passwordCreate = useCallback(\n    (e) => {\n      e.preventDefault();\n      resetPassword(form.password, form.code)\n        .then((data) => {\n          if (data.success) {\n            history.replace({ pathname: '/' });\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    [form, history]\n  );\n\n  return (\n    <div className={stylesResetPassword.main}>\n      <form\n        onSubmit={passwordCreate}\n        className={stylesResetPassword.form + ' mb-20'}\n      >\n        <h1\n          className={\n            stylesResetPassword.heading + ' text text_type_main-large mb-6'\n          }\n        >\n          Восстановление пароля\n        </h1>\n        <div className={'mb-6'}>\n          <PasswordInput\n            value={form.password}\n            name=\"password\"\n            onChange={onChange}\n          />\n        </div>\n        <div className={'mb-6'}>\n          <Input\n            placeholder=\"Введите код из письма\"\n            value={form.code}\n            name=\"code\"\n            onChange={onChange}\n          />\n        </div>\n        <Button type=\"primary\">Сохранить</Button>\n      </form>\n      <div className={stylesResetPassword.footerLine}>\n        <p className={'text text_type_main-default text_color_inactive'}>\n          Уже зарегистрированы?\n        </p>\n        <Link\n          to=\"/login\"\n          className={stylesGlobal.link + ' text text_type_main-default ml-2'}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default ResetPassword;\n","import React, {\n  useState,\n  useEffect,\n  MouseEvent,\n  FormEvent,\n  SyntheticEvent,\n} from 'react';\nimport {\n  Input,\n  PasswordInput,\n  EmailInput,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport stylesProfile from './Profile.module.css';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../utils/hooks';\nimport { patchUser, logout } from '../../services/actions/authActions';\nimport { TUserData } from '../../utils/types';\n\nfunction Profile() {\n  const dispatch = useDispatch();\n  const user = useSelector((store) => store.authReducer.user);\n  const [form, setValue] = useState<TUserData>({\n    name: '',\n    password: '',\n    email: '',\n  });\n  const [changed, setChanged] = useState(false);\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n    setChanged(true);\n    console.log(form);\n  };\n\n  const cancelClick = (e: SyntheticEvent<Element, Event>) => {\n    setValue(user);\n  };\n\n  function onClick(e: FormEvent) {\n    e.preventDefault();\n    if (changed) dispatch(patchUser(form));\n  }\n  function onExit(e: MouseEvent) {\n    dispatch(logout());\n  }\n  useEffect(() => {\n    setValue(user);\n  }, [user]);\n\n  const inactiveButtonStyle = changed\n    ? {}\n    : { opacity: 0.5, cursor: 'default' };\n\n  return (\n    <div className={stylesProfile.main}>\n      <div className={stylesProfile.nav + ' mr-15'}>\n        <NavLink\n          to={{ pathname: '/profile' }}\n          className={stylesProfile.link + ' text text_type_main-medium'}\n          activeClassName={\n            stylesProfile.activeLink + ' text text_type_main-medium'\n          }\n        >\n          Профиль\n        </NavLink>\n        <NavLink\n          to={{ pathname: '/profile/orders' }}\n          className={stylesProfile.link + ' text text_type_main-medium'}\n          activeClassName={\n            stylesProfile.activeLink + ' text text_type_main-medium'\n          }\n        >\n          История заказов\n        </NavLink>\n        <div\n          className={stylesProfile.exitLink + ' text text_type_main-medium'}\n          onClick={onExit}\n        >\n          Выход\n        </div>\n        <p\n          className={stylesProfile.text + ' text text_type_main-default mt-20'}\n        >\n          В этом разделе вы можете изменить свои персональные данные\n        </p>\n      </div>\n      <form className={stylesProfile.form + ' mb-20'} onSubmit={onClick}>\n        <div className={stylesProfile.input + ' mb-6'}>\n          <Input\n            placeholder=\"Имя\"\n            value={form.name || ''}\n            name=\"name\"\n            onChange={onChange}\n          />\n        </div>\n        <div className={stylesProfile.input + ' mb-6'}>\n          <EmailInput\n            value={form.email || ''}\n            name=\"email\"\n            onChange={onChange}\n          />\n        </div>\n        <div className={stylesProfile.input + ' mb-6'}>\n          <PasswordInput\n            value={form.password || ''}\n            name=\"password\"\n            onChange={onChange}\n          />\n        </div>\n        <div className={stylesProfile.buttons}>\n          <div style={inactiveButtonStyle}>\n            <Button type=\"primary\" size=\"medium\">\n              Сохранить\n            </Button>\n          </div>\n          <Button onClick={cancelClick} type=\"secondary\">\n            Отмена\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default Profile;\n","import { getUser } from '../../services/actions/authActions';\nimport { Route, Redirect } from 'react-router-dom';\nimport { FunctionComponent, ReactNode, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from '../../utils/hooks';\nimport Preloader from '../../pages/Preloader/Preloader';\n\ninterface IProtectedRouteProps {\n  children: ReactNode;\n  path: string;\n  exact?: boolean;\n}\n\nconst ProtectedRoute: FunctionComponent<IProtectedRouteProps> = ({\n  children,\n  ...rest\n}) => {\n  const [isUserLoaded, setUserLoaded] = useState(false);\n  const auth = useSelector((store) => store.authReducer.isAuthorized);\n  const dispatch = useDispatch();\n  const init = async () => {\n    await dispatch(getUser());\n    setUserLoaded(true);\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  if (!isUserLoaded) {\n    return <Preloader />;\n  }\n\n  return (\n    <Route\n      {...rest}\n      // Получим текущий маршрут, с которого произойдёт переадресация\n      // для неавторизованного пользователя\n      render={({ location }) =>\n        auth ? (\n          children\n        ) : (\n          <Redirect\n            // Передадим в пропс to не строку, а объект.\n            to={{\n              // Маршрут, на который произойдёт переадресация\n              pathname: '/login',\n              // В from сохраним текущий маршрут\n              state: { from: location },\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport stylesIngredientInfo from './IngredientInfo.module.css';\nimport { useSelector } from '../../utils/hooks';\nimport { useParams } from 'react-router-dom';\nimport { TItem } from '../../utils/types';\n\nfunction IngredientInfo() {\n  const { id } = useParams<{ id?: string }>();\n  const items = useSelector((store) => store.burgerReducer.ingredients);\n  const item = items.find((el: TItem) => el._id === id);\n\n  if (!item) {\n    return <div></div>;\n  }\n  return (\n    <div className={stylesIngredientInfo.bigCard}>\n      <h1 className={stylesIngredientInfo.label + ' text text_type_main-large'}>\n        Детали ингредиента\n      </h1>\n\n      <img src={item.image_large} alt=\"Ингредиент\" className=\"mr-5 ml-5\" />\n      <p\n        className={\n          stylesIngredientInfo.bigCardName + ' text text_type_main-medium mt-4'\n        }\n      >\n        {item.name}\n      </p>\n      <div className={stylesIngredientInfo.nutrients + ' mt-8 mb-15'}>\n        <div className={stylesIngredientInfo.nutrient + ' mr-5'}>\n          <p className=\"text text_type_main-default\">Калории, ккал</p>\n          <p className=\"text text_type_digits-default\">{item.calories}</p>\n        </div>\n        <div className={stylesIngredientInfo.nutrient + ' mr-5'}>\n          <p className=\"text text_type_main-default\">Белки, г</p>\n          <p className=\"text text_type_digits-default\">{item.proteins}</p>\n        </div>\n        <div className={stylesIngredientInfo.nutrient + ' mr-5'}>\n          <p className=\"text text_type_main-default\">Жиры, г</p>\n          <p className=\"text text_type_digits-default\">{item.fat}</p>\n        </div>\n        <div className={stylesIngredientInfo.nutrient}>\n          <p className=\"text text_type_main-default\">Углеводы, г</p>\n          <p className=\"text text_type_digits-default\">{item.carbohydrates}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default IngredientInfo;\n","import React from 'react';\nimport stylesIngredientDetails from './IngredientDetails.module.css';\nimport { useParams } from 'react-router-dom';\nimport { useSelector } from '../../utils/hooks';\nimport { TItem } from '../../utils/types';\n\nfunction IngredientDetails() {\n  let { id } = useParams<{ id?: string }>();\n  const items = useSelector((store) => store.burgerReducer.ingredients);\n  const item = items.find((el: TItem) => el._id === id);\n  if (!item) {\n    return <div></div>;\n  }\n  return (\n    <div className={stylesIngredientDetails.bigCard}>\n      <img src={item.image_large} alt=\"Ингредиент\" className=\"mr-5 ml-5\" />\n      <p\n        className={\n          stylesIngredientDetails.bigCardName +\n          ' text text_type_main-medium mt-4'\n        }\n      >\n        {item.name}\n      </p>\n      <div className={stylesIngredientDetails.nutrients + ' mt-8 mb-15'}>\n        <div className={stylesIngredientDetails.nutrient + ' mr-5'}>\n          <p className=\"text text_type_main-default\">Калории, ккал</p>\n          <p className=\"text text_type_digits-default\">{item.calories}</p>\n        </div>\n        <div className={stylesIngredientDetails.nutrient + ' mr-5'}>\n          <p className=\"text text_type_main-default\">Белки, г</p>\n          <p className=\"text text_type_digits-default\">{item.proteins}</p>\n        </div>\n        <div className={stylesIngredientDetails.nutrient + ' mr-5'}>\n          <p className=\"text text_type_main-default\">Жиры, г</p>\n          <p className=\"text text_type_digits-default\">{item.fat}</p>\n        </div>\n        <div className={stylesIngredientDetails.nutrient}>\n          <p className=\"text text_type_main-default\">Углеводы, г</p>\n          <p className=\"text text_type_digits-default\">{item.carbohydrates}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default IngredientDetails;\n","import React, { FC, ReactNode } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { TItem, TOrderRow } from '../../utils/types';\nimport styles from './Order.module.css';\nimport { format, formatDistanceToNow, isToday, isYesterday } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector } from '../../utils/hooks';\n\ninterface IOrderProps {\n  data: TOrderRow;\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n  path: string;\n}\n\nconst Order: FC<IOrderProps> = ({ data, onModalOpen, path }) => {\n  const history = useHistory();\n  let location = useLocation();\n  function onClick() {\n    history.push({\n      pathname: `${path}${data.number}`,\n      state: { background: location },\n    });\n  }\n\n  let stringOfDate = '';\n\n  if (isToday(Date.parse(data.createdAt))) {\n    stringOfDate = 'Сегодня, ';\n  } else if (isYesterday(Date.parse(data.createdAt))) {\n    stringOfDate = 'Вчера, ';\n  } else {\n    stringOfDate =\n      formatDistanceToNow(Date.parse(data.createdAt), {\n        locale: ru,\n      }) + ' назад, ';\n  }\n  stringOfDate += format(Date.parse(data.createdAt), 'HH:mm zzz');\n  const ingredientsData = useSelector(\n    (store) => store.burgerReducer.ingredients\n  );\n\n  let ingredientsArray: Array<TItem> = [];\n  data.ingredients.forEach((el) => {\n    const indexOfIngredient = ingredientsData.findIndex(\n      (item) => item._id === el\n    );\n    if (indexOfIngredient >= 0) {\n      ingredientsArray.push(ingredientsData[indexOfIngredient]);\n    }\n  });\n\n  let price = 0;\n\n  for (let item of ingredientsArray) {\n    if (item) {\n      price = price + (item.type === 'bun' ? item.price * 2 : item.price);\n    }\n  }\n\n  return (\n    <div\n      className={styles.order + ' pt-6 pr-6 pb-6 pl-6 mr-2'}\n      onClick={onClick}\n    >\n      <div className={styles.number}>\n        <p className={'text text_type_digits-default'}>\n          {'#' + String(data.number).padStart(6, '0')}\n        </p>\n        <p className={'text text_type_main-default text_color_inactive'}>\n          {stringOfDate}\n        </p>\n      </div>\n      <p className={styles.burgerName + ' text text_type_main-medium mt-6'}>\n        {data.name}\n      </p>\n      <div className={styles.orderContent + ' mt-6'}>\n        <div className={styles.ingredients}>\n          {ingredientsArray.map((el, index) => {\n            if (!el || index > 5) {\n              return null;\n            }\n            let remains = '';\n            if (index === 5 && ingredientsArray.length > 6) {\n              remains = '+' + (ingredientsArray.length - 5);\n            }\n            return (\n              <div className={styles.image} key={index.toString()}>\n                <img\n                  alt=\"Фото\"\n                  src={el.image_mobile}\n                  className={styles.circles}\n                ></img>\n                {remains && (\n                  <p\n                    className={styles.remains + ' text text_type_main-default'}\n                  >\n                    {remains}\n                  </p>\n                )}\n              </div>\n            );\n          })}\n        </div>\n        <div className={styles.price}>\n          <p className={'text text_type_digits-default mr-2'}>{price}</p>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Order;\n","import React, { FC, ReactNode } from 'react';\nimport styles from './FeedContent.module.css';\nimport { TOrders } from '../../utils/types';\nimport Order from '../Order/Order';\n\ninterface IFeedContentProps {\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n  recivedData: TOrders;\n  path: string;\n}\n\nconst FeedContent: FC<IFeedContentProps> = ({\n  onModalOpen,\n  recivedData,\n  path,\n}) => {\n  return (\n    <section className={styles.section}>\n      <div className={styles.orders}>\n        <div className={styles.chapter + ' mt-6'}>\n          {recivedData.orders.map((item) => (\n            <Order\n              data={item}\n              key={item._id}\n              onModalOpen={onModalOpen}\n              path={path}\n            />\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default FeedContent;\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport styles from './OrdersSummary.module.css';\nimport { TOrders } from '../../utils/types';\n\ninterface IOrdersSummaryProps {\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n  recivedData: TOrders;\n}\n\nconst OrdersSummary: FunctionComponent<IOrdersSummaryProps> = ({\n  onModalOpen,\n  recivedData,\n}) => {\n  return (\n    <div className={styles.list + ' mt-25 mb-4 pr-4'}>\n      <div className={styles.columns}>\n        <div className={styles.done}>\n          <p\n            className={styles.doneNumbers + ' mb-4 text text_type_main-medium'}\n          >\n            Готовы:\n          </p>\n          <div className={styles.doneList}>\n            {recivedData.orders.map((item) => {\n              if (item.status === 'done') {\n                return (\n                  <p\n                    key={item._id}\n                    className=\"text text_type_digits-default text_color_inactive\"\n                  >\n                    {String(item.number).padStart(6, '0')}\n                  </p>\n                );\n              } else {\n                return null;\n              }\n            })}\n          </div>\n        </div>\n        <div className={styles.work}>\n          <p\n            className={styles.doneNumbers + ' mb-4 text text_type_main-medium'}\n          >\n            В работе:\n          </p>\n          {recivedData.orders.map((item) => {\n            if (item.status !== 'done') {\n              return (\n                <p key={item._id} className=\"text text_type_digits-default\">\n                  {String(item.number).padStart(6, '0')}\n                </p>\n              );\n            } else {\n              return null;\n            }\n          })}\n        </div>\n      </div>\n      <p className=\"text text_type_main-medium mt-15\">\n        Выполнено за все время:\n      </p>\n      <p className=\"text text_type_digits-large\">{recivedData.total}</p>\n      <p className=\"text text_type_main-medium mt-15\">Выполнено за сегодня:</p>\n      <p className=\"text text_type_digits-large\">{recivedData.totalToday}</p>\n    </div>\n  );\n};\n\nexport default OrdersSummary;\n","import React, { FC, ReactNode, useEffect } from 'react';\nimport styles from './Feed.module.css';\nimport FeedContent from '../../components/FeedContent/FeedContent';\nimport OrdersSummary from '../../components/OrdersSummary/OrdersSummary';\nimport { useDispatch, useSelector } from '../../utils/hooks';\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSE,\n} from '../../services/actions';\nimport { wsApiOrderURL } from '../../utils/const';\nimport Preloader from '../Preloader/Preloader';\n\ninterface IFeedProps {\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n}\n\nconst Feed: FC<IFeedProps> = ({ onModalOpen }) => {\n  const recivedData = useSelector((store) => store.wsReducer.messages);\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch({\n      type: WS_CONNECTION_START,\n      payload: wsApiOrderURL,\n    });\n    return () => {\n      dispatch({\n        type: WS_CONNECTION_CLOSE,\n      });\n    };\n  }, [dispatch]);\n\n  if (!recivedData.success) {\n    return <Preloader />;\n  }\n  return (\n    <div className={styles.main}>\n      <div className={styles.feed + ' mr-10'}>\n        <h1 className={`${styles.label} text text_type_main-large mt-10 mb-5`}>\n          Лента заказов\n        </h1>\n        <FeedContent\n          onModalOpen={onModalOpen}\n          recivedData={recivedData}\n          path={'/feed/'}\n        />\n      </div>\n      <OrdersSummary onModalOpen={onModalOpen} recivedData={recivedData} />\n    </div>\n  );\n};\n\nexport default Feed;\n","import React, { useEffect, useState } from 'react';\nimport styles from './OrderComposition.module.css';\nimport { useParams } from 'react-router-dom';\nimport { useSelector } from '../../utils/hooks';\nimport { TItem, TOrderRow } from '../../utils/types';\nimport { format, formatDistanceToNow, isToday, isYesterday } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { getOrder } from '../../utils/auth';\nimport { useHistory } from 'react-router-dom';\n\nfunction OrderComposition() {\n  let { id } = useParams<{ id?: string }>();\n  const [item, setItem] = useState<TOrderRow>();\n  const items = useSelector((store) => store.wsReducer.messages.orders);\n  const ingredientsData = useSelector(\n    (store) => store.burgerReducer.ingredients\n  );\n  let needHeader = ' mt-25';\n  const history = useHistory();\n  if (history.action === 'PUSH' || history.action === 'REPLACE') {\n    needHeader = '';\n  }\n\n  useEffect(() => {\n    const foundedOrder = items.find(\n      (el: TOrderRow) => el.number === Number(id)\n    );\n\n    if (foundedOrder) {\n      setItem(foundedOrder);\n    } else {\n      getOrder(Number(id)).then((res) => {\n        if (res.success) {\n          setItem(res.orders[0]);\n        }\n      });\n    }\n  }, [id, items]);\n\n  if (!item) {\n    return null;\n  }\n\n  let stringOfDate = '';\n\n  if (isToday(Date.parse(item.createdAt))) {\n    stringOfDate = 'Сегодня, ';\n  } else if (isYesterday(Date.parse(item.createdAt))) {\n    stringOfDate = 'Вчера, ';\n  } else {\n    stringOfDate =\n      formatDistanceToNow(Date.parse(item.createdAt), {\n        locale: ru,\n      }) + ' назад, ';\n  }\n  stringOfDate += format(Date.parse(item.createdAt), 'HH:mm zzz');\n\n  let ingredientsArray: Array<TItem> = [];\n  item.ingredients.forEach((el) => {\n    const indexOfIngredient = ingredientsData.findIndex(\n      (item) => item._id === el\n    );\n    if (indexOfIngredient >= 0) {\n      ingredientsArray.push(ingredientsData[indexOfIngredient]);\n    }\n  });\n\n  let price = 0;\n\n  for (let item of ingredientsArray) {\n    if (item) {\n      price = price + (item.type === 'bun' ? item.price * 2 : item.price);\n    }\n  }\n  let statusName = '';\n  switch (item.status) {\n    case 'done':\n      statusName = 'Выполнен';\n      break;\n    case 'created':\n      statusName = 'Создан';\n      break;\n    case 'pending':\n      statusName = 'Готовится';\n      break;\n  }\n\n  return (\n    <div className={styles.bigCard}>\n      {needHeader && <div className=\"mt-25\"></div>}\n      <p className={styles.number + ' text text_type_digits-default'}>\n        {'#' + String(item.number).padStart(6, '0')}\n      </p>\n      <p\n        className={styles.burgerName + ' text text_type_main-medium mt-6 mb-2'}\n      >\n        {item.name}\n      </p>\n      <p\n        className={\n          styles.burgerStatus + ' text text_type_main-small text_color_inactive'\n        }\n      >\n        {statusName}\n      </p>\n      <p\n        className={styles.burgerName + ' text text_type_main-medium mt-15 mb-6'}\n      >\n        Состав:\n      </p>\n      <div className={styles.list + ' mb-10 pr-6'}>\n        {ingredientsArray.map((el, index) => {\n          if (!el) {\n            return null;\n          }\n          const priceString = (el.type === 'bun' ? '2 x ' : '1 x ') + el.price;\n          return (\n            <div key={index} className={styles.row}>\n              <img\n                alt=\"Фото\"\n                src={el.image_mobile}\n                className={styles.image + ' mr-6'}\n              ></img>\n              <p\n                className={\n                  styles.ingredientName + ' text text_type_main-default mr-4'\n                }\n              >\n                {el.name}\n              </p>\n              <p\n                className={styles.remains + ' text text_type_main-default mr-2'}\n              >\n                {priceString}\n              </p>\n              <CurrencyIcon type=\"primary\" />\n            </div>\n          );\n        })}\n      </div>\n      <div className={styles.footer + ' mb-10'}>\n        <p className={'text text_type_main-default text_color_inactive'}>\n          {stringOfDate}\n        </p>\n        <div className={styles.price}>\n          <p className={'text text_type_digits-default mr-2'}>{price}</p>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default OrderComposition;\n","import React, { FC, useEffect, MouseEvent, ReactNode } from 'react';\nimport styles from './OrdersHistory.module.css';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../utils/hooks';\nimport { logout } from '../../services/actions/authActions';\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSE,\n} from '../../services/actions';\nimport { wsUserApiOrderURL } from '../../utils/const';\nimport { getCookie } from '../../services/actions/authActions';\nimport FeedContent from '../../components/FeedContent/FeedContent';\n\ninterface IOrdersHistoryProps {\n  onModalOpen: (modalChild: ReactNode, modalHeader: string) => void;\n}\n\nconst OrdersHistory: FC<IOrdersHistoryProps> = ({ onModalOpen }) => {\n  const dispatch = useDispatch();\n  const recivedData = useSelector((store) => store.wsReducer.messages);\n\n  function onExit(e: MouseEvent) {\n    dispatch(logout());\n  }\n  useEffect(() => {\n    const accessToken = getCookie('accessToken').replace('Bearer ', '');\n    dispatch({\n      type: WS_CONNECTION_START,\n      payload: `${wsUserApiOrderURL}?token=${accessToken}`,\n    });\n    return () => {\n      dispatch({\n        type: WS_CONNECTION_CLOSE,\n      });\n    };\n  }, [dispatch]);\n\n  return (\n    <div className={styles.main}>\n      <div className={styles.nav + ' mr-15'}>\n        <Link\n          to={{ pathname: '/profile' }}\n          className={styles.link + ' text text_type_main-medium'}\n        >\n          Профиль\n        </Link>\n        <Link\n          to={{ pathname: '/profile/orders' }}\n          className={styles.activeLink + ' text text_type_main-medium'}\n        >\n          История заказов\n        </Link>\n        <div\n          className={styles.exitLink + ' text text_type_main-medium'}\n          onClick={onExit}\n        >\n          Выход\n        </div>\n        <p className={styles.text + ' text text_type_main-default mt-20'}>\n          В этом разделе вы можете просмотреть свою историю заказов\n        </p>\n      </div>\n      <div className={styles.form + ' mb-20'}>\n        <FeedContent\n          onModalOpen={onModalOpen}\n          recivedData={recivedData}\n          path={'/profile/orders/'}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default OrdersHistory;\n","import React, { useEffect, ReactNode } from 'react';\nimport stylesApp from './App.module.css';\nimport AppHeader from '../AppHeader/AppHeader';\nimport Main from '../Main/Main';\nimport Modal from '../Modal/Modal';\nimport Page404 from '../Page404/Page404';\nimport { useDispatch } from '../../utils/hooks';\nimport { getData } from '../../services/actions/burgerActions';\nimport { DELETE_DETAILS } from '../../services/actions';\nimport Login from '../../pages/Login/Login';\nimport Register from '../../pages/Register/Register';\nimport ForgotPassword from '../../pages/ForgotPassword/ForgotPassword';\nimport ResetPassword from '../../pages/ResetPassword/ResetPassword';\nimport Profile from '../../pages/Profile/Profile';\nimport { Switch, Route, useHistory, useLocation } from 'react-router-dom';\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\nimport IngredientInfo from '../../pages/IngredientInfo/IngredientInfo';\nimport IngredientDetails from '../IngredientDetails/IngredientDetails';\nimport { Location } from 'history';\nimport Feed from '../../pages/Feed/Feed';\nimport OrderComposition from '../OrderComposition/OrderComposition';\nimport OrdersHistory from '../../pages/OrdersHistory/OrdersHistory';\n\ntype TLocationState = {\n  background: Location;\n};\n\nfunction App() {\n  const [modalIsOpen, setModalIsOpen] = React.useState(false);\n  const [modalChild, setModalChild] = React.useState<ReactNode | ''>('');\n  const [modalHeader, setModalHeader] = React.useState('');\n  const history = useHistory();\n  let location = useLocation<TLocationState>();\n  const dispatch = useDispatch();\n  let background;\n  const ingredientModalChild = <IngredientDetails />;\n  const ingredientModalHeader = 'Детали ингредиента';\n  const orderModalChild = <OrderComposition />;\n  const orderModalHeader = '';\n\n  if (history.action === 'PUSH' || history.action === 'REPLACE') {\n    background = location.state && location.state.background;\n  } else {\n    background = undefined;\n  }\n  function onModalOpen(modalContent: ReactNode, modalHeaderLabel = '') {\n    setModalChild(modalContent);\n    setModalHeader(modalHeaderLabel);\n    setModalIsOpen(true);\n  }\n\n  function onModalClose() {\n    setModalIsOpen(false);\n    dispatch({\n      type: DELETE_DETAILS,\n    });\n  }\n\n  function onIngredientModalClose() {\n    history.goBack();\n  }\n\n  useEffect(() => {\n    dispatch(getData());\n  }, [dispatch]);\n\n  return (\n    <div className={stylesApp.App}>\n      <Switch location={background || location}>\n        <Route path=\"/\" exact>\n          <AppHeader />\n          <Main onModalOpen={onModalOpen} />\n          {modalIsOpen && (\n            <Modal onClose={onModalClose} header={modalHeader}>\n              {modalChild}\n            </Modal>\n          )}\n        </Route>\n        <Route path=\"/feed\" exact>\n          <AppHeader />\n          <Feed onModalOpen={onModalOpen} />\n          {modalIsOpen && (\n            <Modal onClose={onModalClose} header={modalHeader}>\n              {modalChild}\n            </Modal>\n          )}\n        </Route>\n        <ProtectedRoute path=\"/profile/orders\" exact>\n          <AppHeader />\n          <OrdersHistory onModalOpen={onModalOpen} />\n          {modalIsOpen && (\n            <Modal onClose={onModalClose} header={modalHeader}>\n              {modalChild}\n            </Modal>\n          )}\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/profile/orders/:id\">\n          <AppHeader />\n          <OrderComposition />\n        </ProtectedRoute>\n        <Route path=\"/login\">\n          <AppHeader />\n          <Login />\n        </Route>\n        <Route path=\"/register\">\n          <AppHeader />\n          <Register />\n        </Route>\n        <Route path=\"/forgot-password\">\n          <AppHeader />\n          <ForgotPassword />\n        </Route>\n        <Route path=\"/reset-password\">\n          <AppHeader />\n          <ResetPassword />\n        </Route>\n        <ProtectedRoute path=\"/profile\">\n          <AppHeader />\n          <Profile />\n        </ProtectedRoute>\n        <Route path=\"/ingredients/:id\">\n          <AppHeader />\n          <IngredientInfo />\n        </Route>\n        <Route path=\"/feed/:id\">\n          <AppHeader />\n          <OrderComposition />\n        </Route>\n        <Route path=\"/\">\n          <AppHeader />\n          <Page404 />\n        </Route>\n      </Switch>\n      {background && (\n        <Route path=\"/ingredients/:id\">\n          <Modal\n            onClose={onIngredientModalClose}\n            header={ingredientModalHeader}\n          >\n            {ingredientModalChild}\n          </Modal>\n        </Route>\n      )}\n      {background && (\n        <Route path=\"/feed/:id\">\n          <Modal onClose={onIngredientModalClose} header={orderModalHeader}>\n            {orderModalChild}\n          </Modal>\n        </Route>\n      )}\n      {background && (\n        <ProtectedRoute path=\"/profile/orders/:id\">\n          <Modal onClose={onIngredientModalClose} header={orderModalHeader}>\n            {orderModalChild}\n          </Modal>\n        </ProtectedRoute>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  LOAD_INGREDIENTS,\n  LOAD_DETAILS,\n  DELETE_DETAILS,\n  ORDER_NUMBER,\n  ADD_INGREDIENT,\n  DELETE_INGREDIENT,\n  CHANGE_INGREDIENT,\n  ORDER_CLEAR,\n} from '../actions';\nimport { TBurgerActions } from '../actions/burgerActions';\nimport { TItem } from '../../utils/types';\n\ntype TBurgerState = {\n  ingredients: Array<TItem>;\n  constructor: Array<TItem>;\n  ingredient: TItem | {};\n  order: number;\n};\n\nconst initialState: TBurgerState = {\n  ingredients: [],\n  constructor: [],\n  ingredient: {},\n  order: 0,\n};\n\nexport const burgerReducer = (state = initialState, action: TBurgerActions): TBurgerState => {\n  switch (action.type) {\n    // загрузка ингредиентов с сервера\n    case LOAD_INGREDIENTS:\n      return {\n        ...state,\n        ingredients: action.data.map((el) => {\n          el['count'] = 0;\n          return el;\n        }),\n      };\n    // подготовка данных об ингредиенте\n    case LOAD_DETAILS:\n      return {\n        ...state,\n        ingredient: action.item,\n      };\n    // удаление данных об ингредиенте\n    case DELETE_DETAILS:\n      return {\n        ...state,\n        ingredient: {},\n        order: 0,\n      };\n    case ORDER_NUMBER:\n      return {\n        ...state,\n        order: action.number,\n      };\n    case ADD_INGREDIENT:\n      return {\n        ...state,\n        constructor: [\n          ...state.constructor,\n          { ...action.item, constId: action.id },\n        ],\n        ingredients: [...state.ingredients].map((item) =>\n          item._id === action.item._id\n            ? { ...item, count: item.count + action.qnt }\n            : item\n        ),\n      };\n    case DELETE_INGREDIENT:\n      return {\n        ...state,\n        constructor: [...state.constructor].filter(\n          (item) => item.constId !== action.item.constId\n        ),\n        ingredients: [...state.ingredients].map((item) =>\n          item._id === action.item._id\n            ? { ...item, count: item.count - action.qnt }\n            : item\n        ),\n      };\n    case CHANGE_INGREDIENT:\n      const newConstructor = [...state.constructor];\n      const dragIngredient = newConstructor[action.dragIndex];\n      newConstructor.splice(action.dragIndex, 1);\n      newConstructor.splice(action.hoverIndex, 0, dragIngredient);\n\n      return {\n        ...state,\n        constructor: newConstructor,\n      };\n    case ORDER_CLEAR:\n      return {\n        ...state,\n        constructor: [],\n        ingredients: [...state.ingredients].map((item) => {\n          item['count'] = 0;\n          return item;\n        }),\n      };\n\n    // Реакция на прочие типы экшенов\n    default:\n      return state;\n  }\n};\n","import { LOGIN_USER, REGISTER_USER, LOGOUT_USER, CHEK_TOKEN } from '../actions';\nimport type { TUserData } from '../../utils/types';\nimport type { TAuthActions } from '../actions/authActions';\n\ntype TAuthState = {\n  user: TUserData;\n  accessToken: string;\n  isAuthorized: boolean;\n}\n\nconst initialState: TAuthState = {\n  user: {\n    email: '',\n    password: '',\n  },\n  accessToken: '',\n  isAuthorized: false,\n};\n\nexport const authReducer = (state = initialState, action: TAuthActions): TAuthState => {\n  switch (action.type) {\n    // аутентификация пользователя\n    case LOGIN_USER:\n      return {\n        ...state,\n        user: action.data,\n        isAuthorized: true,\n      };\n    // регистрация нового пользователя\n    case REGISTER_USER:\n      return {\n        ...state,\n        user: action.data,\n        isAuthorized: true,\n      };\n    case LOGOUT_USER:\n      return {\n        ...state,\n        user: {\n    email: '',\n    password: '',\n  },\n        isAuthorized: false,\n      };\n    case CHEK_TOKEN:\n      return {\n        ...state,\n        user: action.data,\n        isAuthorized: true,\n      };\n    // Реакция на прочие типы экшенов\n    default:\n      return state;\n  }\n};\n","import { TOrders } from '../../utils/types';\nimport { WS_CONNECTION_SUCCESS, WS_CONNECTION_ERROR, WS_CONNECTION_CLOSED, WS_GET_MESSAGE } from '../actions/index';\nimport type { TWSActions } from '../actions/wsActions';\n\ntype TWSState = {\n  wsConnected: boolean;\n  messages: TOrders;\n\n  error?: Event;\n}\n\nconst initialState: TWSState = {\n    wsConnected: false,\n    messages: {\n      success: false,\n      orders: [],\n      total: 0,\n      totalToday: 0,\n    },\n}; \n\nexport const wsReducer = (state = initialState, action: TWSActions): TWSState => {\n  switch (action.type) {\n        // Опишем обработку экшена с типом WS_CONNECTION_SUCCESS\n        // Установим флаг wsConnected в состояние true\n    case WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n                error: undefined,\n        wsConnected: true\n      };\n\n        // Опишем обработку экшена с типом WS_CONNECTION_ERROR\n        // Установим флаг wsConnected в состояние false и передадим ошибку из action.payload\n    case WS_CONNECTION_ERROR:\n      return {\n        ...state,\n                error: action.payload,\n        wsConnected: false\n      };\n\n        // Опишем обработку экшена с типом WS_CONNECTION_CLOSED, когда соединение закрывается\n        // Установим флаг wsConnected в состояние false\n    case WS_CONNECTION_CLOSED:\n      return {\n        ...state,\n                error: undefined,\n        wsConnected: false\n      };\n\n        // Опишем обработку экшена с типом WS_GET_MESSAGE\n        // Обработка происходит, когда с сервера возвращаются данные\n        // В messages передадим данные, которые пришли с сервера\n    case WS_GET_MESSAGE:\n      return {\n        ...state,\n                error: undefined,\n        messages: action.payload\n      };\n    default:\n      return state;\n  }\n}; \n","import { combineReducers } from 'redux';\nimport { burgerReducer } from './burgerReducers';\nimport { authReducer } from './authReducers';\nimport { wsReducer } from './wsReducers';\n\nexport const rootReducer = combineReducers({\n  burgerReducer,\n  authReducer,\n  wsReducer,\n});\n","// socketMiddleware.ts\nimport type { Middleware, MiddlewareAPI } from 'redux';\n\nimport type { AppDispatch, RootState } from '../../utils/types';\nimport type { TWSActions } from '../actions/wsActions';\n\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSE,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_MESSAGE,\n  WS_SEND_MESSAGE\n} from '../actions/index';\n\n  const wsActions = {\n  wsInit: WS_CONNECTION_START,\n  wsClose: WS_CONNECTION_CLOSE,\n  wsSendMessage: WS_SEND_MESSAGE,\n  onOpen: WS_CONNECTION_SUCCESS,\n  onClose: WS_CONNECTION_CLOSED,\n  onError: WS_CONNECTION_ERROR,\n  onMessage: WS_GET_MESSAGE\n};\n\nexport const socketMiddleware = (): Middleware => {\n    return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\n        let socket: WebSocket | null = null;\n\n    return next => (action: TWSActions) => {\n      const { dispatch } = store;\n      const { type, payload} = action;\n      const { wsInit, wsClose, wsSendMessage, onOpen, onClose, onError, onMessage } = wsActions;\n \n      if (type === wsInit) {\n            // объект класса WebSocket\n        socket = new WebSocket(payload);\n      }\n      if (type === wsClose) {\n            // объект класса WebSocket\n        socket?.close();\n      }\n      if (socket) {\n\n                // функция, которая вызывается при открытии сокета\n        socket.onopen = event => {\n          dispatch({ type: onOpen, payload: event });\n        };\n\n                // функция, которая вызывается при ошибке соединения\n        socket.onerror = event => {\n          dispatch({ type: onError, payload: event });\n        };\n\n                // функция, которая вызывается при получения события от сервера\n        socket.onmessage = event => {\n          const { data } = event;\n          dispatch({ type: onMessage, payload: JSON.parse(data) });\n        };\n                // функция, которая вызывается при закрытии соединения\n        socket.onclose = event => {\n          dispatch({ type: onClose, payload: event });\n        };\n\n        if (type === wsSendMessage) {\n          const message = payload;\n                    // функция для отправки сообщения на сервер\n          socket.send(JSON.stringify(message));\n        }\n      }\n\n      next(action);\n    };\n    }) as Middleware;\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport configureStore from './services/store';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nexport const store = configureStore();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { compose, createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { rootReducer } from './reducers';\nimport { socketMiddleware } from './middleware/socketMiddleware';\n\nexport default function configureStore() {\n  const composeEnhancers =\n    typeof window === 'object' && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n      ? (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n      : compose;\n\n\n  const wsCreatedMiddleware = socketMiddleware()\n  const enhancer = composeEnhancers(applyMiddleware(thunk, wsCreatedMiddleware));\n\n  const store = createStore(rootReducer, enhancer);\n  return store;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"BurgerIngredients_section__2_sVq\",\"tab\":\"BurgerIngredients_tab__2RpA4\",\"chapterLabel\":\"BurgerIngredients_chapterLabel__3UgSQ\",\"chapter\":\"BurgerIngredients_chapter__2eGjP\",\"ingredients\":\"BurgerIngredients_ingredients__1N8v2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"Order_order__RDg-A\",\"feed\":\"Order_feed__3dblE\",\"number\":\"Order_number__WdRyX\",\"burgerName\":\"Order_burgerName__13k2U\",\"orderContent\":\"Order_orderContent__1ZttE\",\"price\":\"Order_price__12m_E\",\"ingredients\":\"Order_ingredients__1iQ4L\",\"circles\":\"Order_circles__BdvMB\",\"image\":\"Order_image__dL89q\",\"remains\":\"Order_remains__vyTVl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"global_link__11u7z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Preloader_spinner__3gLw2\",\"dot\":\"Preloader_dot__npvPn\",\"rotate\":\"Preloader_rotate__YCBOy\",\"pulse\":\"Preloader_pulse__Omb-j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigCard\":\"IngredientInfo_bigCard__2Yh4E\",\"nutrients\":\"IngredientInfo_nutrients__1cAtX\",\"nutrient\":\"IngredientInfo_nutrient__2NtS0\",\"bigCardName\":\"IngredientInfo_bigCardName__1y368\",\"label\":\"IngredientInfo_label__Scrf9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigCard\":\"IngredientDetails_bigCard__2KaxM\",\"nutrients\":\"IngredientDetails_nutrients__1o7wU\",\"nutrient\":\"IngredientDetails_nutrient__2I0eB\",\"bigCardName\":\"IngredientDetails_bigCardName__36cfc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"OrdersSummary_list__1OWW2\",\"columns\":\"OrdersSummary_columns__3NO5R\",\"done\":\"OrdersSummary_done__32Vwb\",\"doneList\":\"OrdersSummary_doneList__2icgg\",\"work\":\"OrdersSummary_work__2iG08\",\"doneNumbers\":\"OrdersSummary_doneNumbers__1_OF6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"OrdersHistory_form__3HOqZ\",\"nav\":\"OrdersHistory_nav__4fBaf\",\"main\":\"OrdersHistory_main__1NcBd\",\"footerLine\":\"OrdersHistory_footerLine__149tZ\",\"link\":\"OrdersHistory_link__FC6Al\",\"exitLink\":\"OrdersHistory_exitLink__2FOVs\",\"activeLink\":\"OrdersHistory_activeLink__3l3kY\",\"text\":\"OrdersHistory_text__u812b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigCard\":\"OrderDetails_bigCard__2hLnh\",\"order\":\"OrderDetails_order__3pGzU\",\"stationText\":\"OrderDetails_stationText__1oIgE\",\"done\":\"OrderDetails_done__2y57Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__P3_V5\",\"buttonClose\":\"Modal_buttonClose__2pdSk\",\"header\":\"Modal_header__StajR\",\"label\":\"Modal_label__1ipzf\",\"children\":\"Modal_children__3R2Fy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Login_form__3bufY\",\"heading\":\"Login_heading__2GvJc\",\"main\":\"Login_main__CU5LU\",\"footerLine\":\"Login_footerLine__2SAuA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Register_form__1kKs6\",\"heading\":\"Register_heading__2iyxA\",\"main\":\"Register_main__2ct8w\",\"footerLine\":\"Register_footerLine__1-3gM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ForgotPassword_form__1nQuw\",\"heading\":\"ForgotPassword_heading__2ahH3\",\"main\":\"ForgotPassword_main__1xc_K\",\"footerLine\":\"ForgotPassword_footerLine__vprhg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ResetPassword_form__2P1rR\",\"heading\":\"ResetPassword_heading__127Zj\",\"main\":\"ResetPassword_main__3Fapx\",\"footerLine\":\"ResetPassword_footerLine__3IBhJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"BurgerConstructor_list__lE5PO\",\"footer\":\"BurgerConstructor_footer__1m9Od\",\"total\":\"BurgerConstructor_total__3LNMz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Ingredient_card__Cif_s\",\"price\":\"Ingredient_price__3ii0a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Feed_main__xeU2D\",\"label\":\"Feed_label__1Gou-\",\"feed\":\"Feed_feed__I3EXS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chapter\":\"FeedContent_chapter__2BNm2\",\"orders\":\"FeedContent_orders__dYhY3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Main_main__3de2d\",\"label\":\"Main_label__A2nyS\"};"],"sourceRoot":""}